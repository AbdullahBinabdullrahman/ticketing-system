{"version":3,"sources":["turbopack:///[project]/projects/ticketing-platform/services/emailService.ts"],"sourcesContent":["/**\n * Email Service using Nodemailer with PrivateEmail SMTP Configuration\n *\n * Setup:\n * 1. Make sure to set the NEXT_PUBLIC_EMAIL_PASSWORD environment variable with your account password\n * 2. Add to your .env.local file:\n *    NEXT_PUBLIC_EMAIL=platform@mesdrive.com\n *    NEXT_PUBLIC_EMAIL_PASSWORD=your_account_password\n *\n * Usage Examples:\n *\n * // Send a simple email\n * const result = await emailService.sendEmail({\n *   to: 'user@example.com',\n *   subject: 'Test Email',\n *   html: '<h1>Hello World!</h1>',\n *   text: 'Hello World!'\n * });\n *\n * // Send a welcome email with password (English)\n * await emailService.sendWelcomeEmail('user@example.com', 'John Doe', 'TempPass123!', 'en');\n *\n * // Send a welcome email with password (Arabic)\n * await emailService.sendWelcomeEmail('user@example.com', 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯', 'TempPass123!', 'ar');\n *\n * // Send a notification (English)\n * await emailService.sendNotificationEmail('user@example.com', 'Booking Confirmed', 'Your car booking has been confirmed.', 'en');\n *\n * // Send a notification (Arabic)\n * await emailService.sendNotificationEmail('user@example.com', 'ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²', 'ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø­Ø¬Ø² Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ.', 'ar');\n *\n * // Send password reset email (English)\n * await emailService.sendPasswordResetEmail('user@example.com', 'reset-token', 'https://yoursite.com/reset?token=reset-token', 'en');\n *\n * // Send password reset email (Arabic)\n * await emailService.sendPasswordResetEmail('user@example.com', 'reset-token', 'https://yoursite.com/reset?token=reset-token', 'ar');\n *\n * // Send OTP code (English)\n * await emailService.sendOTPEmail('user@example.com', '123456', 'login', 10, 'en');\n *\n * // Send OTP code (Arabic)\n * await emailService.sendOTPEmail('user@example.com', '123456', 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„', 10, 'ar');\n */\n\nimport nodemailer, { Transporter } from \"nodemailer\";\n\n// Email configuration interface\ninterface EmailConfig {\n  host: string;\n  port: number;\n  secure: boolean;\n  auth: {\n    user: string;\n    pass: string;\n  };\n}\n\n// Language type\nexport type Language = \"ar\" | \"en\";\n\n// Email options interface\nexport interface EmailOptions {\n  to: string | string[];\n  subject: string;\n  text?: string;\n  html?: string;\n  attachments?: Array<{\n    filename: string;\n    path?: string;\n    content?: Buffer | string;\n    contentType?: string;\n  }>;\n}\n\n// Email content interface for multi-language support\ninterface EmailContent {\n  ar: {\n    subject: string;\n    html: string;\n    text: string;\n  };\n  en: {\n    subject: string;\n    html: string;\n    text: string;\n  };\n}\n\n// Email service class\nclass EmailService {\n  private transporter: Transporter;\n  private config: EmailConfig;\n\n  constructor() {\n    this.config = {\n      host: \"mail.privateemail.com\",\n      port: 465,\n      secure: true, // true for 465, false for other ports\n      auth: {\n        user: \"platform@mesdrive.com\",\n        pass: \"Rvm@89Axcvnb\", // Use environment variable for password\n      },\n    };\n\n    this.transporter = nodemailer.createTransport(this.config);\n  }\n\n  /**\n   * Get email styling based on language (RTL for Arabic, LTR for English)\n   * @param language - The language code ('ar' or 'en')\n   * @returns CSS styling for the email\n   */\n  private getEmailStyling(language: Language): string {\n    const isRTL = language === \"ar\";\n    return `\n      font-family: ${\n        isRTL\n          ? \"'Tahoma', 'Arial Unicode MS', Arial, sans-serif\"\n          : \"Arial, sans-serif\"\n      };\n      direction: ${isRTL ? \"rtl\" : \"ltr\"};\n      text-align: ${isRTL ? \"right\" : \"left\"};\n    `;\n  }\n\n  /**\n   * Get common translations\n   * @param language - The language code ('ar' or 'en')\n   */\n  private getCommonTranslations(language: Language) {\n    const translations = {\n      ar: {\n        companyName: \"Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±\",\n        bestRegards: \"Ù…Ø¹ Ø£Ø·ÙŠØ¨ Ø§Ù„ØªØ­ÙŠØ§ØªØŒ\",\n        teamName: \"ÙØ±ÙŠÙ‚ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±\",\n        doNotReply:\n          \"Ù‡Ø°Ø§ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±.<br>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¹Ø¯Ù… Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.\",\n        allRightsReserved: \"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±.\",\n      },\n      en: {\n        companyName: \"Ticketing System\",\n        bestRegards: \"Best regards,\",\n        teamName: \"Ticketing System Team\",\n        doNotReply:\n          \"This is an automated message from Ticketing System.<br>Please do not reply to this email.\",\n        allRightsReserved: \"Ticketing System. All rights reserved. 2025\",\n      },\n    };\n    return translations[language];\n  }\n\n  /**\n   * Verify the email configuration\n   * @returns Promise<boolean> - Returns true if connection is successful\n   */\n  async verifyConnection(): Promise<boolean> {\n    try {\n      await this.transporter.verify();\n      console.log(\"Email server connection verified successfully\");\n      return true;\n    } catch (error) {\n      console.error(\"Email server connection failed:\", error);\n      return false;\n    }\n  }\n\n  /**\n   * Send an email\n   * @param options - Email options including recipient, subject, and content\n   * @returns Promise with email result\n   */\n  async sendEmail(\n    options: EmailOptions\n  ): Promise<{ success: boolean; messageId?: string; error?: string }> {\n    try {\n      // Validate required fields\n      if (!options.to || !options.subject || (!options.text && !options.html)) {\n        throw new Error(\n          \"Missing required email fields: to, subject, and content (text or html)\"\n        );\n      }\n\n      // Check if password is configured\n      if (!this.config.auth.pass) {\n        throw new Error(\n          \"Email password not configured. Please set NEXT_PUBLIC_EMAIL_PASSWORD environment variable.\"\n        );\n      }\n\n      const mailOptions = {\n        from: `\"Ticketing System\" <${this.config.auth.user}>`, // sender address\n        to: Array.isArray(options.to) ? options.to.join(\", \") : options.to,\n        subject: options.subject,\n        text: options.text,\n        html: options.html,\n        attachments: options.attachments,\n      };\n\n      const info = await this.transporter.sendMail(mailOptions);\n      console.log(\"Email sent successfully:\", info.messageId);\n\n      return {\n        success: true,\n        messageId: info.messageId,\n      };\n    } catch (error) {\n      console.error(\"Failed to send email:\", error);\n      return {\n        success: false,\n        error:\n          error instanceof Error ? error.message : \"Unknown error occurred\",\n      };\n    }\n  }\n\n  /**\n   * Send a welcome email to new users\n   * @param to - Recipient email address\n   * @param userName - User's name\n   * @param password - User's initial password\n   * @param language - Language preference ('ar' for Arabic, 'en' for English)\n   */\n  async sendWelcomeEmail(\n    to: string,\n    userName: string,\n    password: string,\n    language: Language = \"en\"\n  ): Promise<{ success: boolean; messageId?: string; error?: string }> {\n    const common = this.getCommonTranslations(language);\n    const styling = this.getEmailStyling(language);\n\n    const content: EmailContent = {\n      ar: {\n        subject: `Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ${common.companyName}`,\n        html: `\n           <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n             <h2 style=\"color: #fb923c; text-align: center;\">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ${\n               common.companyName\n             }</h2>\n             <p>Ø¹Ø²ÙŠØ²ÙŠ ${userName}ØŒ</p>\n             <p>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±! Ù†Ø­Ù† Ù…ØªØ­Ù…Ø³ÙˆÙ† Ù„ÙˆØ¬ÙˆØ¯Ùƒ ÙƒØ¬Ø²Ø¡ Ù…Ù† Ù…Ø¬ØªÙ…Ø¹Ù†Ø§.</p>\n             \n             <!-- Login Credentials Section -->\n             <div style=\"background-color: #fef7f0; border: 2px solid #fb923c; border-radius: 8px; padding: 20px; margin: 20px 0;\">\n               <h3 style=\"color: #fb923c; margin: 0 0 15px 0; text-align: center;\">Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ</h3>\n               <div style=\"background-color: #ffffff; padding: 15px; border-radius: 6px;\">\n                 <p style=\"margin: 8px 0;\"><strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</strong> <span style=\"color: #1f2937; font-family: monospace;\">${to}</span></p>\n                 <p style=\"margin: 8px 0;\"><strong>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</strong> <span style=\"color: #dc2626; font-weight: bold; font-family: monospace; background-color: #fef2f2; padding: 4px 8px; border-radius: 4px;\">${password}</span></p>\n               </div>\n               <p style=\"color: #dc2626; font-size: 14px; margin: 15px 0 5px 0; font-weight: 600;\">\n                 ğŸ”’ Ù…Ù‡Ù…: ÙŠØ±Ø¬Ù‰ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£ÙˆÙ„\n               </p>\n             </div>\n\n             \n             <p>Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø©ØŒ Ù„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ù„Ø¯ÙŠÙ†Ø§.</p>\n             <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n             <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n             <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n               ${common.doNotReply}\n             </p>\n             <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n               Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n             </p>\n           </div>\n         `,\n        text: `Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±!\\n\\nØ¹Ø²ÙŠØ²ÙŠ ${userName}ØŒ\\n\\nØ£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±! Ù†Ø­Ù† Ù…ØªØ­Ù…Ø³ÙˆÙ† Ù„ÙˆØ¬ÙˆØ¯Ùƒ ÙƒØ¬Ø²Ø¡ Ù…Ù† Ù…Ø¬ØªÙ…Ø¹Ù†Ø§.\\n\\nØ¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ:\\nØ§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: ${to}\\nÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${password}\\n\\nâš ï¸ Ù…Ù‡Ù…: ÙŠØ±Ø¬Ù‰ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£ÙˆÙ„\\n\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n      en: {\n        subject: `Welcome to ${common.companyName}`,\n        html: `\n           <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n             <h2 style=\"color: #fb923c; text-align: center;\">Welcome to ${\n               common.companyName\n             }</h2>\n             <p>Dear ${userName},</p>\n             <p>Welcome to Ticketing System! We're excited to have you as part of our community.</p>\n             \n             <!-- Login Credentials Section -->\n             <div style=\"background-color: #fef7f0; border: 2px solid #fb923c; border-radius: 8px; padding: 20px; margin: 20px 0;\">\n               <h3 style=\"color: #fb923c; margin: 0 0 15px 0; text-align: center;\">Your Login Credentials</h3>\n               <div style=\"background-color: #ffffff; padding: 15px; border-radius: 6px;\">\n                 <p style=\"margin: 8px 0;\"><strong>Email:</strong> <span style=\"color: #1f2937; font-family: monospace;\">${to}</span></p>\n                 <p style=\"margin: 8px 0;\"><strong>Password:</strong> <span style=\"color: #dc2626; font-weight: bold; font-family: monospace; background-color: #fef2f2; padding: 4px 8px; border-radius: 4px;\">${password}</span></p>\n               </div>\n               <p style=\"color: #dc2626; font-size: 14px; margin: 15px 0 5px 0; font-weight: 600;\">\n                 ğŸ”’ Important: Please change your password after your first login\n               </p>\n             </div>\n\n            \n             <p>If you have any questions, feel free to contact our support team.</p>\n             <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n             <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n             <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n               ${common.doNotReply}\n             </p>\n             <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n               Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n             </p>\n           </div>\n         `,\n        text: `Welcome to Ticketing System!\\n\\nDear ${userName},\\n\\nWelcome to Ticketing System! We're excited to have you as part of our community.\\n\\nYour Login Credentials:\\nEmail: ${to}\\nPassword: ${password}\\n\\nâš ï¸ Important: Please change your password after your first login\\n\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n    };\n\n    const emailOptions: EmailOptions = {\n      to,\n      subject: content[language].subject,\n      html: content[language].html,\n      text: content[language].text,\n    };\n\n    return this.sendEmail(emailOptions);\n  }\n\n  /**\n   * Send a notification email\n   * @param to - Recipient email address\n   * @param subject - Email subject\n   * @param message - Email message\n   * @param language - Language preference ('ar' for Arabic, 'en' for English)\n   */\n  async sendNotificationEmail(\n    to: string,\n    subject: string,\n    message: string,\n    language: Language = \"en\"\n  ): Promise<{ success: boolean; messageId?: string; error?: string }> {\n    const common = this.getCommonTranslations(language);\n    const styling = this.getEmailStyling(language);\n\n    const content: EmailContent = {\n      ar: {\n        subject: subject,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">Ø¥Ø´Ø¹Ø§Ø± Ù…Ù† ${\n              common.companyName\n            }</h2>\n            <div style=\"background-color: #fef7f0; border: 1px solid #fb923c; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n              <p>${message.replace(/\\n/g, \"<br>\")}</p>\n            </div>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `Ø¥Ø´Ø¹Ø§Ø± Ù…Ù† ${common.companyName}\\n\\n${message}\\n\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n      en: {\n        subject: subject,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">${\n              common.companyName\n            } Notification</h2>\n            <div style=\"background-color: #fef7f0; border: 1px solid #fb923c; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n              <p>${message.replace(/\\n/g, \"<br>\")}</p>\n            </div>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `${common.companyName} Notification\\n\\n${message}\\n\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n    };\n\n    const emailOptions: EmailOptions = {\n      to,\n      subject: content[language].subject,\n      html: content[language].html,\n      text: content[language].text,\n    };\n\n    return this.sendEmail(emailOptions);\n  }\n\n  /**\n   * Send a password reset email\n   * @param to - Recipient email address\n   * @param resetToken - Password reset token\n   * @param resetUrl - Password reset URL\n   * @param language - Language preference ('ar' for Arabic, 'en' for English)\n   */\n  async sendPasswordResetEmail(\n    to: string,\n    resetToken: string,\n    resetUrl: string,\n    language: Language = \"en\"\n  ): Promise<{ success: boolean; messageId?: string; error?: string }> {\n    const common = this.getCommonTranslations(language);\n    const styling = this.getEmailStyling(language);\n\n    const content: EmailContent = {\n      ar: {\n        subject: `Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± - ${common.companyName}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h2>\n            <p>Ù„Ù‚Ø¯ Ø·Ù„Ø¨Øª Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ ÙÙŠ ${\n              common.companyName\n            }.</p>\n            <p>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø£Ø¯Ù†Ø§Ù‡ Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</p>\n            <div style=\"text-align: center; margin: 30px 0;\">\n              <a href=\"${resetUrl}\" style=\"background-color: #fb923c; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; display: inline-block;\">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</a>\n            </div>\n            <p>Ø¥Ø°Ø§ Ù„Ù… ØªØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±ØŒ Ø§Ù†Ø³Ø® ÙˆØ§Ù„ØµÙ‚ Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ù…ØªØµÙØ­Ùƒ:</p>\n            <p style=\"word-break: break-all; background-color: #fef7f0; border: 1px solid #D1CDCD; padding: 10px; border-radius: 4px; direction: ltr;\">${resetUrl}</p>\n            <p><strong>Ø³ÙŠÙ†ØªÙ‡ÙŠ ØµÙ„Ø§Ø­ÙŠØ© Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø© Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø£Ù…Ù†ÙŠØ©.</strong></p>\n            <p>Ø¥Ø°Ø§ Ù„Ù… ØªØ·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù‡Ø°Ù‡ØŒ ÙŠØ±Ø¬Ù‰ ØªØ¬Ø§Ù‡Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.</p>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\\n\\nÙ„Ù‚Ø¯ Ø·Ù„Ø¨Øª Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ ÙÙŠ ${common.companyName}.\\n\\nØ§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${resetUrl}\\n\\nØ³ÙŠÙ†ØªÙ‡ÙŠ ØµÙ„Ø§Ø­ÙŠØ© Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø© Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø£Ù…Ù†ÙŠØ©.\\n\\nØ¥Ø°Ø§ Ù„Ù… ØªØ·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù‡Ø°Ù‡ØŒ ÙŠØ±Ø¬Ù‰ ØªØ¬Ø§Ù‡Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.\\n\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n      en: {\n        subject: `Password Reset Request - ${common.companyName}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">Password Reset Request</h2>\n            <p>You have requested to reset your password for ${\n              common.companyName\n            }.</p>\n            <p>Click the button below to reset your password:</p>\n            <div style=\"text-align: center; margin: 30px 0;\">\n              <a href=\"${resetUrl}\" style=\"background-color: #fb923c; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; display: inline-block;\">Reset Password</a>\n            </div>\n            <p>If you can't click the button, copy and paste this link in your browser:</p>\n            <p style=\"word-break: break-all; background-color: #fef7f0; border: 1px solid #D1CDCD; padding: 10px; border-radius: 4px;\">${resetUrl}</p>\n            <p><strong>This link will expire in 1 hour for security reasons.</strong></p>\n            <p>If you didn't request this password reset, please ignore this email.</p>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `Password Reset Request\\n\\nYou have requested to reset your password for ${common.companyName}.\\n\\nClick this link to reset your password: ${resetUrl}\\n\\nThis link will expire in 1 hour for security reasons.\\n\\nIf you didn't request this password reset, please ignore this email.\\n\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n    };\n\n    const emailOptions: EmailOptions = {\n      to,\n      subject: content[language].subject,\n      html: content[language].html,\n      text: content[language].text,\n    };\n\n    return this.sendEmail(emailOptions);\n  }\n\n  /**\n   * Send an OTP (One-Time Password) email\n   * @param to - Recipient email address\n   * @param otpCode - The OTP code to send\n   * @param purpose - The purpose of the OTP (e.g., \"login\", \"verification\", \"registration\")\n   * @param expiryMinutes - OTP expiry time in minutes (default: 10)\n   * @param language - Language preference ('ar' for Arabic, 'en' for English)\n   */\n  async sendOTPEmail(\n    to: string,\n    otpCode: string,\n    purpose: string = \"verification\",\n    expiryMinutes: number = 10,\n    language: Language = \"en\"\n  ): Promise<{ success: boolean; messageId?: string; error?: string }> {\n    const common = this.getCommonTranslations(language);\n    const styling = this.getEmailStyling(language);\n\n    // Purpose translations\n    const purposeTranslations = {\n      ar: {\n        verification: \"Ø§Ù„ØªØ­Ù‚Ù‚\",\n        login: \"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„\",\n        registration: \"Ø§Ù„ØªØ³Ø¬ÙŠÙ„\",\n        \"password reset\": \"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\",\n      },\n      en: {\n        verification: \"verification\",\n        login: \"login\",\n        registration: \"registration\",\n        \"password reset\": \"password reset\",\n      },\n    };\n\n    const translatedPurpose =\n      purposeTranslations[language][\n        purpose as keyof (typeof purposeTranslations)[Language]\n      ] || purpose;\n\n    const content: EmailContent = {\n      ar: {\n        subject: `Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ - ${common.companyName}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px; background-color: #ffffff;\">\n            <!-- Header -->\n            <div style=\"text-align: center; margin-bottom: 30px;\">\n              <h1 style=\"color: #fb923c; margin: 0; font-size: 28px;\">${\n                common.companyName\n              }</h1>\n              <p style=\"color: #D1CDCD; margin: 5px 0 0 0; font-size: 14px;\">Ø±Ù…Ø² ${translatedPurpose} Ø§Ù„Ø¢Ù…Ù†</p>\n            </div>\n\n            <!-- Main Content -->\n            <div style=\"background-color: #fef7f0; padding: 30px; border-radius: 12px; text-align: center; margin-bottom: 20px;\">\n              <h2 style=\"color: #1f2937; margin: 0 0 20px 0; font-size: 24px;\">Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</h2>\n              <p style=\"color: #4b5563; margin: 0 0 30px 0; font-size: 16px;\">Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ù„Ø¥ÙƒÙ…Ø§Ù„ ${translatedPurpose}:</p>\n              \n              <!-- OTP Code Box -->\n              <div style=\"background-color: #ffffff; border: 2px solid #fb923c; border-radius: 8px; padding: 25px; margin: 20px auto; display: inline-block; min-width: 200px;\">\n                <div style=\"font-size: 36px; font-weight: bold; color: #fb923c; letter-spacing: 8px; font-family: 'Courier New', monospace; direction: ltr;\">${otpCode}</div>\n              </div>\n              \n              <p style=\"color: #ef4444; font-weight: 600; margin: 20px 0 0 0; font-size: 14px;\">\n                â° ÙŠÙ†ØªÙ‡ÙŠ ØµÙ„Ø§Ø­ÙŠØ© Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ø®Ù„Ø§Ù„ ${expiryMinutes} Ø¯Ù‚ÙŠÙ‚Ø©\n              </p>\n            </div>\n\n            <!-- Security Notice -->\n            <div style=\"background-color: #fef7f0; border: 1px solid #fb923c; border-radius: 8px; padding: 15px; margin: 20px 0;\">\n              <h3 style=\"color: #fb923c; margin: 0 0 10px 0; font-size: 16px;\">\n                ğŸ”’ ØªÙ†Ø¨ÙŠÙ‡ Ø£Ù…Ù†ÙŠ\n              </h3>\n              <ul style=\"color: #1f2937; margin: 0; padding-right: 20px; font-size: 14px; list-style-type: disc;\">\n                <li>Ù„Ø§ ØªØ´Ø§Ø±Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ù…Ø¹ Ø£ÙŠ Ø´Ø®Øµ</li>\n                <li>${\n                  common.companyName\n                } Ù„Ù† ÙŠØ·Ù„Ø¨ Ù…Ù†Ùƒ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ø¨Ø± Ø§Ù„Ù‡Ø§ØªÙ Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</li>\n                <li>Ø¥Ø°Ø§ Ù„Ù… ØªØ·Ù„Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø²ØŒ ÙŠØ±Ø¬Ù‰ ØªØ¬Ø§Ù‡Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</li>\n              </ul>\n            </div>\n\n            <!-- Instructions -->\n            <div style=\"margin: 20px 0;\">\n              <p style=\"color: #4b5563; margin: 0; font-size: 14px; line-height: 1.5;\">\n                Ø¥Ø°Ø§ ÙƒÙ†Øª ØªÙˆØ§Ø¬Ù‡ Ù…Ø´ÙƒÙ„Ø©ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ù„Ø¨ Ø±Ù…Ø² Ø¬Ø¯ÙŠØ¯ Ø£Ùˆ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©.\n              </p>\n            </div>\n\n            <!-- Footer -->\n            <div style=\"margin-top: 40px;\">\n              <p style=\"color: #4b5563; margin: 0; font-size: 16px;\">${\n                common.bestRegards\n              }<br><strong>${common.teamName}</strong></p>\n            </div>\n            \n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 30px 0;\">\n            \n            <!-- Email Footer -->\n            <div style=\"text-align: center;\">\n              <p style=\"font-size: 12px; color: #D1CDCD; margin: 0;\">\n                ${common.doNotReply}\n              </p>\n              <p style=\"font-size: 12px; color: #D1CDCD; margin: 10px 0 0 0;\">\n                Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n              </p>\n            </div>\n          </div>\n        `,\n        text: `${\n          common.companyName\n        } - Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ\\n\\nØ±Ù…Ø² ${translatedPurpose}: ${otpCode}\\n\\nÙŠÙ†ØªÙ‡ÙŠ ØµÙ„Ø§Ø­ÙŠØ© Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ø®Ù„Ø§Ù„ ${expiryMinutes} Ø¯Ù‚ÙŠÙ‚Ø©.\\n\\nØªÙ†Ø¨ÙŠÙ‡ Ø£Ù…Ù†ÙŠ:\\n- Ù„Ø§ ØªØ´Ø§Ø±Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ù…Ø¹ Ø£ÙŠ Ø´Ø®Øµ\\n- ${\n          common.companyName\n        } Ù„Ù† ÙŠØ·Ù„Ø¨ Ù…Ù†Ùƒ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ø¨Ø± Ø§Ù„Ù‡Ø§ØªÙ Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ\\n- Ø¥Ø°Ø§ Ù„Ù… ØªØ·Ù„Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø²ØŒ ÙŠØ±Ø¬Ù‰ ØªØ¬Ø§Ù‡Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ\\n\\n${\n          common.bestRegards\n        }\\n${common.teamName}\\n\\nÂ© ${new Date().getFullYear()} ${\n          common.allRightsReserved\n        }`,\n      },\n      en: {\n        subject: `Your OTP Code - ${common.companyName}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px; background-color: #ffffff;\">\n            <!-- Header -->\n            <div style=\"text-align: center; margin-bottom: 30px;\">\n              <h1 style=\"color: #fb923c; margin: 0; font-size: 28px;\">${\n                common.companyName\n              }</h1>\n              <p style=\"color: #D1CDCD; margin: 5px 0 0 0; font-size: 14px;\">Secure ${translatedPurpose} code</p>\n            </div>\n\n            <!-- Main Content -->\n            <div style=\"background-color: #fef7f0; padding: 30px; border-radius: 12px; text-align: center; margin-bottom: 20px;\">\n              <h2 style=\"color: #1f2937; margin: 0 0 20px 0; font-size: 24px;\">Your Verification Code</h2>\n              <p style=\"color: #4b5563; margin: 0 0 30px 0; font-size: 16px;\">Use this code to complete your ${translatedPurpose}:</p>\n              \n              <!-- OTP Code Box -->\n              <div style=\"background-color: #ffffff; border: 2px solid #fb923c; border-radius: 8px; padding: 25px; margin: 20px auto; display: inline-block; min-width: 200px;\">\n                <div style=\"font-size: 36px; font-weight: bold; color: #fb923c; letter-spacing: 8px; font-family: 'Courier New', monospace;\">${otpCode}</div>\n              </div>\n              \n              <p style=\"color: #ef4444; font-weight: 600; margin: 20px 0 0 0; font-size: 14px;\">\n                â° This code expires in ${expiryMinutes} minutes\n              </p>\n            </div>\n\n            <!-- Security Notice -->\n            <div style=\"background-color: #fef7f0; border: 1px solid #fb923c; border-radius: 8px; padding: 15px; margin: 20px 0;\">\n              <h3 style=\"color: #fb923c; margin: 0 0 10px 0; font-size: 16px;\">\n                ğŸ”’ Security Notice\n              </h3>\n              <ul style=\"color: #1f2937; margin: 0; padding-left: 20px; font-size: 14px;\">\n                <li>Never share this code with anyone</li>\n                <li>${\n                  common.companyName\n                } will never ask for your OTP over phone or email</li>\n                <li>If you didn't request this code, please ignore this email</li>\n              </ul>\n            </div>\n\n            <!-- Instructions -->\n            <div style=\"margin: 20px 0;\">\n              <p style=\"color: #4b5563; margin: 0; font-size: 14px; line-height: 1.5;\">\n                If you're having trouble, you can request a new code or contact our support team for assistance.\n              </p>\n            </div>\n\n            <!-- Footer -->\n            <div style=\"margin-top: 40px;\">\n              <p style=\"color: #4b5563; margin: 0; font-size: 16px;\">${\n                common.bestRegards\n              }<br><strong>${common.teamName}</strong></p>\n            </div>\n            \n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 30px 0;\">\n            \n            <!-- Email Footer -->\n            <div style=\"text-align: center;\">\n              <p style=\"font-size: 12px; color: #D1CDCD; margin: 0;\">\n                ${common.doNotReply}\n              </p>\n              <p style=\"font-size: 12px; color: #D1CDCD; margin: 10px 0 0 0;\">\n                Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n              </p>\n            </div>\n          </div>\n        `,\n        text: `${\n          common.companyName\n        } - Your Verification Code\\n\\nYour ${translatedPurpose} code: ${otpCode}\\n\\nThis code expires in ${expiryMinutes} minutes.\\n\\nSecurity Notice:\\n- Never share this code with anyone\\n- ${\n          common.companyName\n        } will never ask for your OTP over phone or email\\n- If you didn't request this code, please ignore this email\\n\\n${\n          common.bestRegards\n        }\\n${common.teamName}\\n\\nÂ© ${new Date().getFullYear()} ${\n          common.allRightsReserved\n        }`,\n      },\n    };\n\n    const emailOptions: EmailOptions = {\n      to,\n      subject: content[language].subject,\n      html: content[language].html,\n      text: content[language].text,\n    };\n\n    return this.sendEmail(emailOptions);\n  }\n\n  /**\n   * Send a reservation notification email\n   * @param to - Recipient email address\n   * @param reservationDetails - Reservation information\n   * @param language - Language preference ('ar' for Arabic, 'en' for English)\n   */\n  async sendReservationNotification(\n    to: string,\n    reservationDetails: {\n      reservationId: string;\n      vehicleMake: string;\n      vehicleModel: string;\n      vehicleYear: number;\n      startDate: string;\n      endDate: string;\n      customerName: string;\n      totalAmount?: string;\n    },\n    language: Language = \"en\"\n  ): Promise<{ success: boolean; messageId?: string; error?: string }> {\n    const common = this.getCommonTranslations(language);\n    const styling = this.getEmailStyling(language);\n\n    const content: EmailContent = {\n      ar: {\n        subject: `ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² - ${reservationDetails.reservationId}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">ØªØ£ÙƒÙŠØ¯ Ø­Ø¬Ø² Ø§Ù„Ø³ÙŠØ§Ø±Ø©</h2>\n            \n            <div style=\"background-color: #fef7f0; border: 1px solid #fb923c; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n              <h3 style=\"color: #fb923c; margin-top: 0;\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²</h3>\n              <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²:</strong> ${\n                reservationDetails.reservationId\n              }</p>\n              <p><strong>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> ${\n                reservationDetails.customerName\n              }</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø©</h4>\n              <p><strong>Ø§Ù„Ø³ÙŠØ§Ø±Ø©:</strong> ${reservationDetails.vehicleMake} ${\n          reservationDetails.vehicleModel\n        } ${reservationDetails.vehicleYear}</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">ÙØªØ±Ø© Ø§Ù„Ø§Ø³ØªØ¦Ø¬Ø§Ø±</h4>\n              <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:</strong> ${\n                reservationDetails.startDate\n              }</p>\n              <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©:</strong> ${\n                reservationDetails.endDate\n              }</p>\n              ${\n                reservationDetails.totalAmount\n                  ? `<hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <p style=\"font-size: 18px;\"><strong>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</strong> <span style=\"color: #fb923c;\">${reservationDetails.totalAmount} Ø±ÙŠØ§Ù„</span></p>`\n                  : \"\"\n              }\n            </div>\n            \n            <p>Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø±ÙƒÙ… Ø®Ø¯Ù…Ø§ØªÙ†Ø§. Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙƒÙ… Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªÙØ§ØµÙŠÙ„.</p>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `ØªØ£ÙƒÙŠØ¯ Ø­Ø¬Ø² Ø§Ù„Ø³ÙŠØ§Ø±Ø©\\n\\nØ±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²: ${\n          reservationDetails.reservationId\n        }\\nØ§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„: ${\n          reservationDetails.customerName\n        }\\n\\nÙ…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø©:\\n${reservationDetails.vehicleMake} ${\n          reservationDetails.vehicleModel\n        } ${\n          reservationDetails.vehicleYear\n        }\\n\\nÙØªØ±Ø© Ø§Ù„Ø§Ø³ØªØ¦Ø¬Ø§Ø±:\\nØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©: ${\n          reservationDetails.startDate\n        }\\nØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©: ${reservationDetails.endDate}\\n${\n          reservationDetails.totalAmount\n            ? `\\nØ§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${reservationDetails.totalAmount} Ø±ÙŠØ§Ù„`\n            : \"\"\n        }\\n\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n      en: {\n        subject: `Reservation Confirmation - ${reservationDetails.reservationId}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">Car Reservation Confirmation</h2>\n            \n            <div style=\"background-color: #fef7f0; border: 1px solid #fb923c; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n              <h3 style=\"color: #fb923c; margin-top: 0;\">Reservation Details</h3>\n              <p><strong>Reservation ID:</strong> ${\n                reservationDetails.reservationId\n              }</p>\n              <p><strong>Customer Name:</strong> ${\n                reservationDetails.customerName\n              }</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Vehicle Information</h4>\n              <p><strong>Vehicle:</strong> ${reservationDetails.vehicleMake} ${\n          reservationDetails.vehicleModel\n        } ${reservationDetails.vehicleYear}</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Rental Period</h4>\n              <p><strong>Start Date:</strong> ${\n                reservationDetails.startDate\n              }</p>\n              <p><strong>End Date:</strong> ${reservationDetails.endDate}</p>\n              ${\n                reservationDetails.totalAmount\n                  ? `<hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <p style=\"font-size: 18px;\"><strong>Total Amount:</strong> <span style=\"color: #fb923c;\">${reservationDetails.totalAmount} SAR</span></p>`\n                  : \"\"\n              }\n            </div>\n            \n            <p>Thank you for choosing our services. We will contact you soon to confirm the details.</p>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `Car Reservation Confirmation\\n\\nReservation ID: ${\n          reservationDetails.reservationId\n        }\\nCustomer Name: ${\n          reservationDetails.customerName\n        }\\n\\nVehicle Information:\\n${reservationDetails.vehicleMake} ${\n          reservationDetails.vehicleModel\n        } ${reservationDetails.vehicleYear}\\n\\nRental Period:\\nStart Date: ${\n          reservationDetails.startDate\n        }\\nEnd Date: ${reservationDetails.endDate}\\n${\n          reservationDetails.totalAmount\n            ? `\\nTotal Amount: ${reservationDetails.totalAmount} SAR`\n            : \"\"\n        }\\n\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n    };\n\n    const emailOptions: EmailOptions = {\n      to,\n      subject: content[language].subject,\n      html: content[language].html,\n      text: content[language].text,\n    };\n\n    return this.sendEmail(emailOptions);\n  }\n\n  /**\n   * Send an agreement/contract notification email\n   * @param to - Recipient email address\n   * @param agreementDetails - Agreement information\n   * @param language - Language preference ('ar' for Arabic, 'en' for English)\n   */\n  async sendAgreementNotification(\n    to: string,\n    agreementDetails: {\n      contractNumber: string;\n      vehicleMake: string;\n      vehicleModel: string;\n      customerName: string;\n      startDate: string;\n      endDate: string;\n      totalAmount: string;\n      paidAmount?: string;\n      status: string;\n    },\n    language: Language = \"en\"\n  ): Promise<{ success: boolean; messageId?: string; error?: string }> {\n    const common = this.getCommonTranslations(language);\n    const styling = this.getEmailStyling(language);\n\n    const statusTranslations = {\n      ar: {\n        draft: \"Ù…Ø³ÙˆØ¯Ø©\",\n        active: \"Ù†Ø´Ø·\",\n        extended: \"Ù…Ù…Ø¯Ø¯\",\n        closed: \"Ù…ØºÙ„Ù‚\",\n        suspended: \"Ù…Ø¹Ù„Ù‚\",\n      },\n      en: {\n        draft: \"Draft\",\n        active: \"Active\",\n        extended: \"Extended\",\n        closed: \"Closed\",\n        suspended: \"Suspended\",\n      },\n    };\n\n    const translatedStatus =\n      statusTranslations[language][\n        agreementDetails.status as keyof (typeof statusTranslations)[Language]\n      ] || agreementDetails.status;\n\n    const content: EmailContent = {\n      ar: {\n        subject: `Ø¹Ù‚Ø¯ Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø³ÙŠØ§Ø±Ø© - ${agreementDetails.contractNumber}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">ØªØ£ÙƒÙŠØ¯ Ø¹Ù‚Ø¯ Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø³ÙŠØ§Ø±Ø©</h2>\n            \n            <div style=\"background-color: #fef7f0; border: 2px solid #fb923c; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n              <h3 style=\"color: #fb923c; margin-top: 0;\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù‚Ø¯</h3>\n              <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø¯:</strong> <span style=\"font-family: monospace; color: #1f2937;\">${\n                agreementDetails.contractNumber\n              }</span></p>\n              <p><strong>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> ${\n                agreementDetails.customerName\n              }</p>\n              <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> <span style=\"background-color: #fbbf24; color: #000; padding: 2px 8px; border-radius: 4px;\">${translatedStatus}</span></p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø©</h4>\n              <p><strong>Ø§Ù„Ø³ÙŠØ§Ø±Ø©:</strong> ${agreementDetails.vehicleMake} ${\n          agreementDetails.vehicleModel\n        }</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">ÙØªØ±Ø© Ø§Ù„Ø¹Ù‚Ø¯</h4>\n              <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:</strong> ${\n                agreementDetails.startDate\n              }</p>\n              <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©:</strong> ${agreementDetails.endDate}</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h4>\n              <p><strong>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</strong> <span style=\"color: #fb923c; font-size: 20px; font-weight: bold;\">${\n                agreementDetails.totalAmount\n              } Ø±ÙŠØ§Ù„</span></p>\n              ${\n                agreementDetails.paidAmount\n                  ? `<p><strong>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹:</strong> ${agreementDetails.paidAmount} Ø±ÙŠØ§Ù„</p>`\n                  : \"\"\n              }\n            </div>\n            \n            <p>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù‚Ø¯ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­. ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ ÙÙŠ Ø­Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª.</p>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `Ø¹Ù‚Ø¯ Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø³ÙŠØ§Ø±Ø©\\n\\nØ±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø¯: ${\n          agreementDetails.contractNumber\n        }\\nØ§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„: ${\n          agreementDetails.customerName\n        }\\nØ§Ù„Ø­Ø§Ù„Ø©: ${translatedStatus}\\n\\nÙ…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø©:\\n${\n          agreementDetails.vehicleMake\n        } ${agreementDetails.vehicleModel}\\n\\nÙØªØ±Ø© Ø§Ù„Ø¹Ù‚Ø¯:\\nØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©: ${\n          agreementDetails.startDate\n        }\\nØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©: ${agreementDetails.endDate}\\n\\nØ§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${\n          agreementDetails.totalAmount\n        } Ø±ÙŠØ§Ù„\\n${\n          agreementDetails.paidAmount\n            ? `Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹: ${agreementDetails.paidAmount} Ø±ÙŠØ§Ù„`\n            : \"\"\n        }\\n\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n      en: {\n        subject: `Car Rental Agreement - ${agreementDetails.contractNumber}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">Car Rental Agreement Confirmation</h2>\n            \n            <div style=\"background-color: #fef7f0; border: 2px solid #fb923c; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n              <h3 style=\"color: #fb923c; margin-top: 0;\">Contract Details</h3>\n              <p><strong>Contract Number:</strong> <span style=\"font-family: monospace; color: #1f2937;\">${\n                agreementDetails.contractNumber\n              }</span></p>\n              <p><strong>Customer Name:</strong> ${\n                agreementDetails.customerName\n              }</p>\n              <p><strong>Status:</strong> <span style=\"background-color: #fbbf24; color: #000; padding: 2px 8px; border-radius: 4px;\">${translatedStatus}</span></p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Vehicle Information</h4>\n              <p><strong>Vehicle:</strong> ${agreementDetails.vehicleMake} ${\n          agreementDetails.vehicleModel\n        }</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Contract Period</h4>\n              <p><strong>Start Date:</strong> ${agreementDetails.startDate}</p>\n              <p><strong>End Date:</strong> ${agreementDetails.endDate}</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Financial Details</h4>\n              <p><strong>Total Amount:</strong> <span style=\"color: #fb923c; font-size: 20px; font-weight: bold;\">${\n                agreementDetails.totalAmount\n              } SAR</span></p>\n              ${\n                agreementDetails.paidAmount\n                  ? `<p><strong>Paid Amount:</strong> ${agreementDetails.paidAmount} SAR</p>`\n                  : \"\"\n              }\n            </div>\n            \n            <p>Your rental agreement has been created successfully. Please review the details and contact us if you have any questions.</p>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `Car Rental Agreement\\n\\nContract Number: ${\n          agreementDetails.contractNumber\n        }\\nCustomer Name: ${\n          agreementDetails.customerName\n        }\\nStatus: ${translatedStatus}\\n\\nVehicle Information:\\n${\n          agreementDetails.vehicleMake\n        } ${agreementDetails.vehicleModel}\\n\\nContract Period:\\nStart Date: ${\n          agreementDetails.startDate\n        }\\nEnd Date: ${agreementDetails.endDate}\\n\\nTotal Amount: ${\n          agreementDetails.totalAmount\n        } SAR\\n${\n          agreementDetails.paidAmount\n            ? `Paid Amount: ${agreementDetails.paidAmount} SAR`\n            : \"\"\n        }\\n\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n    };\n\n    const emailOptions: EmailOptions = {\n      to,\n      subject: content[language].subject,\n      html: content[language].html,\n      text: content[language].text,\n    };\n\n    return this.sendEmail(emailOptions);\n  }\n\n  /**\n   * Send a payment notification email\n   * @param to - Recipient email address\n   * @param paymentDetails - Payment information\n   * @param language - Language preference ('ar' for Arabic, 'en' for English)\n   */\n  async sendPaymentNotification(\n    to: string,\n    paymentDetails: {\n      paymentId: string;\n      contractNumber: string;\n      amount: string;\n      paymentMethod: string;\n      receivedAt: string;\n      customerName: string;\n      reference?: string;\n    },\n    language: Language = \"en\"\n  ): Promise<{ success: boolean; messageId?: string; error?: string }> {\n    const common = this.getCommonTranslations(language);\n    const styling = this.getEmailStyling(language);\n\n    const content: EmailContent = {\n      ar: {\n        subject: `Ø¥ÙŠØµØ§Ù„ Ø¯ÙØ¹ - ${paymentDetails.contractNumber}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">âœ“ ØªØ£ÙƒÙŠØ¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¯ÙØ¹</h2>\n            \n            <div style=\"background-color: #f0fdf4; border: 2px solid #10b981; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n              <h3 style=\"color: #10b981; margin-top: 0;\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯ÙØ¹</h3>\n              <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø¥ÙŠØµØ§Ù„:</strong> <span style=\"font-family: monospace;\">${\n                paymentDetails.paymentId\n              }</span></p>\n              <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø¯:</strong> ${\n                paymentDetails.contractNumber\n              }</p>\n              <p><strong>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> ${paymentDetails.customerName}</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¨Ù„Øº</h4>\n              <p style=\"font-size: 24px; color: #10b981; font-weight: bold; margin: 10px 0;\">\n                ${paymentDetails.amount} Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ\n              </p>\n              <p><strong>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</strong> ${\n                paymentDetails.paymentMethod\n              }</p>\n              <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…:</strong> ${\n                paymentDetails.receivedAt\n              }</p>\n              ${\n                paymentDetails.reference\n                  ? `<p><strong>Ø§Ù„Ù…Ø±Ø¬Ø¹:</strong> ${paymentDetails.reference}</p>`\n                  : \"\"\n              }\n            </div>\n            \n            <p>ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­. Ø´ÙƒØ±Ø§Ù‹ Ù„Ø«Ù‚ØªÙƒÙ… Ø¨Ø®Ø¯Ù…Ø§ØªÙ†Ø§.</p>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `Ø¥ÙŠØµØ§Ù„ Ø¯ÙØ¹\\n\\nØ±Ù‚Ù… Ø§Ù„Ø¥ÙŠØµØ§Ù„: ${\n          paymentDetails.paymentId\n        }\\nØ±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø¯: ${paymentDetails.contractNumber}\\nØ§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„: ${\n          paymentDetails.customerName\n        }\\n\\nØ§Ù„Ù…Ø¨Ù„Øº: ${paymentDetails.amount} Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ\\nØ·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ${\n          paymentDetails.paymentMethod\n        }\\nØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…: ${paymentDetails.receivedAt}\\n${\n          paymentDetails.reference ? `Ø§Ù„Ù…Ø±Ø¬Ø¹: ${paymentDetails.reference}` : \"\"\n        }\\n\\nØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­.\\n\\n${common.bestRegards}\\n${\n          common.teamName\n        }`,\n      },\n      en: {\n        subject: `Payment Receipt - ${paymentDetails.contractNumber}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">âœ“ Payment Confirmation</h2>\n            \n            <div style=\"background-color: #f0fdf4; border: 2px solid #10b981; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n              <h3 style=\"color: #10b981; margin-top: 0;\">Payment Details</h3>\n              <p><strong>Receipt Number:</strong> <span style=\"font-family: monospace;\">${\n                paymentDetails.paymentId\n              }</span></p>\n              <p><strong>Contract Number:</strong> ${\n                paymentDetails.contractNumber\n              }</p>\n              <p><strong>Customer Name:</strong> ${\n                paymentDetails.customerName\n              }</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Amount Information</h4>\n              <p style=\"font-size: 24px; color: #10b981; font-weight: bold; margin: 10px 0;\">\n                ${paymentDetails.amount} SAR\n              </p>\n              <p><strong>Payment Method:</strong> ${\n                paymentDetails.paymentMethod\n              }</p>\n              <p><strong>Received At:</strong> ${paymentDetails.receivedAt}</p>\n              ${\n                paymentDetails.reference\n                  ? `<p><strong>Reference:</strong> ${paymentDetails.reference}</p>`\n                  : \"\"\n              }\n            </div>\n            \n            <p>Payment received successfully. Thank you for your business.</p>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `Payment Receipt\\n\\nReceipt Number: ${\n          paymentDetails.paymentId\n        }\\nContract Number: ${paymentDetails.contractNumber}\\nCustomer Name: ${\n          paymentDetails.customerName\n        }\\n\\nAmount: ${paymentDetails.amount} SAR\\nPayment Method: ${\n          paymentDetails.paymentMethod\n        }\\nReceived At: ${paymentDetails.receivedAt}\\n${\n          paymentDetails.reference\n            ? `Reference: ${paymentDetails.reference}`\n            : \"\"\n        }\\n\\nPayment received successfully.\\n\\n${common.bestRegards}\\n${\n          common.teamName\n        }`,\n      },\n    };\n\n    const emailOptions: EmailOptions = {\n      to,\n      subject: content[language].subject,\n      html: content[language].html,\n      text: content[language].text,\n    };\n\n    return this.sendEmail(emailOptions);\n  }\n\n  /**\n   * Send a maintenance notification email\n   * @param to - Recipient email address\n   * @param maintenanceDetails - Maintenance information\n   * @param language - Language preference ('ar' for Arabic, 'en' for English)\n   */\n  async sendMaintenanceNotification(\n    to: string,\n    maintenanceDetails: {\n      maintenanceId: string;\n      vehicleMake: string;\n      vehicleModel: string;\n      plateNumber: string;\n      serviceType: string;\n      scheduledDate: string;\n      provider?: string;\n      estimatedCost?: string;\n      notes?: string;\n    },\n    language: Language = \"en\"\n  ): Promise<{ success: boolean; messageId?: string; error?: string }> {\n    const common = this.getCommonTranslations(language);\n    const styling = this.getEmailStyling(language);\n\n    const content: EmailContent = {\n      ar: {\n        subject: `Ø¬Ø¯ÙˆÙ„Ø© ØµÙŠØ§Ù†Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø© - ${maintenanceDetails.plateNumber}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">ğŸ”§ ØªÙ†Ø¨ÙŠÙ‡ ØµÙŠØ§Ù†Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø©</h2>\n            \n            <div style=\"background-color: #fef7f0; border: 1px solid #fb923c; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n              <h3 style=\"color: #fb923c; margin-top: 0;\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø©</h3>\n              <p><strong>Ø±Ù‚Ù… Ø§Ù„ØµÙŠØ§Ù†Ø©:</strong> ${\n                maintenanceDetails.maintenanceId\n              }</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø©</h4>\n              <p><strong>Ø§Ù„Ø³ÙŠØ§Ø±Ø©:</strong> ${maintenanceDetails.vehicleMake} ${\n          maintenanceDetails.vehicleModel\n        }</p>\n              <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©:</strong> <span style=\"font-family: monospace; background-color: #fbbf24; padding: 2px 8px; border-radius: 4px;\">${\n                maintenanceDetails.plateNumber\n              }</span></p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©</h4>\n              <p><strong>Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©:</strong> ${\n                maintenanceDetails.serviceType\n              }</p>\n              <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø¯Ø¯:</strong> <span style=\"color: #fb923c; font-weight: bold;\">${\n                maintenanceDetails.scheduledDate\n              }</span></p>\n              ${\n                maintenanceDetails.provider\n                  ? `<p><strong>Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©:</strong> ${maintenanceDetails.provider}</p>`\n                  : \"\"\n              }\n              ${\n                maintenanceDetails.estimatedCost\n                  ? `<p><strong>Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©:</strong> ${maintenanceDetails.estimatedCost} Ø±ÙŠØ§Ù„</p>`\n                  : \"\"\n              }\n              ${\n                maintenanceDetails.notes\n                  ? `<hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</h4>\n              <p>${maintenanceDetails.notes}</p>`\n                  : \"\"\n              }\n            </div>\n            \n            <p>ØªÙ… Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© Ø¨Ù†Ø¬Ø§Ø­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ø³ÙŠØ§Ø±Ø© ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø¯Ø¯.</p>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `ØªÙ†Ø¨ÙŠÙ‡ ØµÙŠØ§Ù†Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø©\\n\\nØ±Ù‚Ù… Ø§Ù„ØµÙŠØ§Ù†Ø©: ${\n          maintenanceDetails.maintenanceId\n        }\\n\\nÙ…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø©:\\nØ§Ù„Ø³ÙŠØ§Ø±Ø©: ${maintenanceDetails.vehicleMake} ${\n          maintenanceDetails.vehicleModel\n        }\\nØ±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©: ${\n          maintenanceDetails.plateNumber\n        }\\n\\nØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©:\\nÙ†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©: ${\n          maintenanceDetails.serviceType\n        }\\nØ§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø¯Ø¯: ${maintenanceDetails.scheduledDate}\\n${\n          maintenanceDetails.provider\n            ? `Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©: ${maintenanceDetails.provider}\\n`\n            : \"\"\n        }${\n          maintenanceDetails.estimatedCost\n            ? `Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©: ${maintenanceDetails.estimatedCost} Ø±ÙŠØ§Ù„\\n`\n            : \"\"\n        }${\n          maintenanceDetails.notes\n            ? `\\nÙ…Ù„Ø§Ø­Ø¸Ø§Øª:\\n${maintenanceDetails.notes}\\n`\n            : \"\"\n        }\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n      en: {\n        subject: `Vehicle Maintenance Scheduled - ${maintenanceDetails.plateNumber}`,\n        html: `\n          <div style=\"${styling} max-width: 600px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #fb923c; text-align: center;\">ğŸ”§ Vehicle Maintenance Alert</h2>\n            \n            <div style=\"background-color: #fef7f0; border: 1px solid #fb923c; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n              <h3 style=\"color: #fb923c; margin-top: 0;\">Maintenance Details</h3>\n              <p><strong>Maintenance ID:</strong> ${\n                maintenanceDetails.maintenanceId\n              }</p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Vehicle Information</h4>\n              <p><strong>Vehicle:</strong> ${maintenanceDetails.vehicleMake} ${\n          maintenanceDetails.vehicleModel\n        }</p>\n              <p><strong>Plate Number:</strong> <span style=\"font-family: monospace; background-color: #fbbf24; padding: 2px 8px; border-radius: 4px;\">${\n                maintenanceDetails.plateNumber\n              }</span></p>\n              <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Service Details</h4>\n              <p><strong>Service Type:</strong> ${\n                maintenanceDetails.serviceType\n              }</p>\n              <p><strong>Scheduled Date:</strong> <span style=\"color: #fb923c; font-weight: bold;\">${\n                maintenanceDetails.scheduledDate\n              }</span></p>\n              ${\n                maintenanceDetails.provider\n                  ? `<p><strong>Service Provider:</strong> ${maintenanceDetails.provider}</p>`\n                  : \"\"\n              }\n              ${\n                maintenanceDetails.estimatedCost\n                  ? `<p><strong>Estimated Cost:</strong> ${maintenanceDetails.estimatedCost} SAR</p>`\n                  : \"\"\n              }\n              ${\n                maintenanceDetails.notes\n                  ? `<hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 15px 0;\">\n              <h4 style=\"color: #1f2937;\">Notes</h4>\n              <p>${maintenanceDetails.notes}</p>`\n                  : \"\"\n              }\n            </div>\n            \n            <p>Maintenance has been scheduled successfully. Please ensure the vehicle is available on the scheduled date.</p>\n            <p>${common.bestRegards}<br><strong>${common.teamName}</strong></p>\n            <hr style=\"border: none; border-top: 1px solid #D1CDCD; margin: 20px 0;\">\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              ${common.doNotReply}\n            </p>\n            <p style=\"font-size: 12px; color: #D1CDCD; text-align: center;\">\n              Â© ${new Date().getFullYear()} ${common.allRightsReserved}\n            </p>\n          </div>\n        `,\n        text: `Vehicle Maintenance Alert\\n\\nMaintenance ID: ${\n          maintenanceDetails.maintenanceId\n        }\\n\\nVehicle Information:\\nVehicle: ${maintenanceDetails.vehicleMake} ${\n          maintenanceDetails.vehicleModel\n        }\\nPlate Number: ${\n          maintenanceDetails.plateNumber\n        }\\n\\nService Details:\\nService Type: ${\n          maintenanceDetails.serviceType\n        }\\nScheduled Date: ${maintenanceDetails.scheduledDate}\\n${\n          maintenanceDetails.provider\n            ? `Service Provider: ${maintenanceDetails.provider}\\n`\n            : \"\"\n        }${\n          maintenanceDetails.estimatedCost\n            ? `Estimated Cost: ${maintenanceDetails.estimatedCost} SAR\\n`\n            : \"\"\n        }${\n          maintenanceDetails.notes\n            ? `\\nNotes:\\n${maintenanceDetails.notes}\\n`\n            : \"\"\n        }\\n${common.bestRegards}\\n${common.teamName}`,\n      },\n    };\n\n    const emailOptions: EmailOptions = {\n      to,\n      subject: content[language].subject,\n      html: content[language].html,\n      text: content[language].text,\n    };\n\n    return this.sendEmail(emailOptions);\n  }\n\n  /**\n   * Send user status change notification email\n   * @param to - Recipient email address\n   * @param userName - User's name\n   * @param changeType - Type of change (activation, deactivation, otpEnabled, otpDisabled)\n   * @param language - Language preference ('ar' for Arabic, 'en' for English)\n   */\n  async sendUserStatusChangeEmail(\n    to: string,\n    userName: string,\n    changeType: \"activation\" | \"deactivation\" | \"otpEnabled\" | \"otpDisabled\",\n    language: Language = \"en\"\n  ): Promise<{ success: boolean; messageId?: string; error?: string }> {\n    const common = this.getCommonTranslations(language);\n    const styling = this.getEmailStyling(language);\n\n    const content: EmailContent = {\n      ar: {\n        subject: this.getUserStatusChangeSubject(changeType, true),\n        html: this.getUserStatusChangeHtml(\n          userName,\n          changeType,\n          common,\n          styling,\n          true\n        ),\n        text: this.getUserStatusChangeText(userName, changeType, common, true),\n      },\n      en: {\n        subject: this.getUserStatusChangeSubject(changeType, false),\n        html: this.getUserStatusChangeHtml(\n          userName,\n          changeType,\n          common,\n          styling,\n          false\n        ),\n        text: this.getUserStatusChangeText(userName, changeType, common, false),\n      },\n    };\n\n    const emailOptions: EmailOptions = {\n      to,\n      subject: content[language].subject,\n      html: content[language].html,\n      text: content[language].text,\n    };\n\n    return this.sendEmail(emailOptions);\n  }\n\n  /**\n   * Get subject for user status change email\n   */\n  private getUserStatusChangeSubject(\n    changeType: \"activation\" | \"deactivation\" | \"otpEnabled\" | \"otpDisabled\",\n    isArabic: boolean\n  ): string {\n    const subjects = {\n      ar: {\n        activation: \"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±\",\n        deactivation: \"ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±\",\n        otpEnabled: \"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ© Ù„Ø­Ø³Ø§Ø¨Ùƒ\",\n        otpDisabled: \"ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ© Ù„Ø­Ø³Ø§Ø¨Ùƒ\",\n      },\n      en: {\n        activation: \"Your Ticketing System account has been activated\",\n        deactivation: \"Your Ticketing System account has been deactivated\",\n        otpEnabled: \"Two-factor authentication enabled for your account\",\n        otpDisabled: \"Two-factor authentication disabled for your account\",\n      },\n    };\n\n    return subjects[isArabic ? \"ar\" : \"en\"][changeType];\n  }\n\n  /**\n   * Get HTML content for user status change email\n   */\n  private getUserStatusChangeHtml(\n    userName: string,\n    changeType: \"activation\" | \"deactivation\" | \"otpEnabled\" | \"otpDisabled\",\n    common: {\n      companyName: string;\n      bestRegards: string;\n      teamName: string;\n      doNotReply: string;\n      allRightsReserved: string;\n    },\n    styling: string,\n    isArabic: boolean\n  ): string {\n    const messages = {\n      ar: {\n        activation: {\n          title: \"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ\",\n          message:\n            \"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ± Ø¨Ù†Ø¬Ø§Ø­. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©.\",\n          action: \"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†\",\n        },\n        deactivation: {\n          title: \"ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ\",\n          message:\n            \"ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±. Ù„Ù† ØªØªÙ…ÙƒÙ† Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø­ØªÙ‰ ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨.\",\n          action: \"Ø§ØªØµÙ„ Ø¨Ø§Ù„Ø¯Ø¹Ù…\",\n        },\n        otpEnabled: {\n          title: \"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ©\",\n          message:\n            \"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ© Ù„Ø­Ø³Ø§Ø¨Ùƒ. Ø³ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…Ø±Ø³Ù„ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø© ØªØ³Ø¬Ù„ ÙÙŠÙ‡Ø§ Ø§Ù„Ø¯Ø®ÙˆÙ„.\",\n          action: \"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†\",\n        },\n        otpDisabled: {\n          title: \"ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ©\",\n          message:\n            \"ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ© Ù„Ø­Ø³Ø§Ø¨Ùƒ. Ù„Ù† ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² ØªØ­Ù‚Ù‚ Ø¥Ø¶Ø§ÙÙŠ Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.\",\n          action: \"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†\",\n        },\n      },\n      en: {\n        activation: {\n          title: \"Account Activated\",\n          message:\n            \"Your Ticketing System account has been successfully activated. You can now log in and access all available features.\",\n          action: \"Log In Now\",\n        },\n        deactivation: {\n          title: \"Account Deactivated\",\n          message:\n            \"Your Ticketing System account has been deactivated. You will not be able to log in until the account is reactivated.\",\n          action: \"Contact Support\",\n        },\n        otpEnabled: {\n          title: \"Two-Factor Authentication Enabled\",\n          message:\n            \"Two-factor authentication has been enabled for your account. You will need to enter a verification code sent to your email each time you log in.\",\n          action: \"Log In Now\",\n        },\n        otpDisabled: {\n          title: \"Two-Factor Authentication Disabled\",\n          message:\n            \"Two-factor authentication has been disabled for your account. You will no longer need to enter an additional verification code when logging in.\",\n          action: \"Log In Now\",\n        },\n      },\n    };\n\n    const message = messages[isArabic ? \"ar\" : \"en\"][changeType];\n\n    // Enhanced styling based on change type\n    const statusIcon =\n      changeType === \"activation\"\n        ? \"ğŸ‰\"\n        : changeType === \"deactivation\"\n        ? \"ğŸ”’\"\n        : changeType === \"otpEnabled\"\n        ? \"ğŸ”\"\n        : \"ğŸ”“\";\n\n    const statusColor =\n      changeType === \"activation\"\n        ? \"#10b981\"\n        : changeType === \"deactivation\"\n        ? \"#ef4444\"\n        : changeType === \"otpEnabled\"\n        ? \"#3b82f6\"\n        : \"#f59e0b\";\n\n    return `\n      <!DOCTYPE html>\n      <html dir=\"${isArabic ? \"rtl\" : \"ltr\"}\" lang=\"${isArabic ? \"ar\" : \"en\"}\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>${message.title}</title>\n        <style>\n          body { margin: 0; padding: 20px; background-color: #f8fafc; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }\n          .container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); }\n          .header { background: linear-gradient(135deg, ${statusColor} 0%, ${statusColor}dd 100%); padding: 40px 20px; text-align: center; }\n          .content { padding: 40px 30px; }\n          .status-card { background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border: 2px solid ${statusColor}20; border-radius: 12px; padding: 30px; margin: 30px 0; text-align: center; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }\n          .action-button { display: inline-block; background: ${statusColor}; color: white; padding: 12px 24px; text-decoration: none; border-radius: 8px; font-weight: 600; margin: 20px 0; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); transition: all 0.2s ease; }\n          .action-button:hover { transform: translateY(-1px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); }\n          .footer { background-color: #f1f5f9; padding: 30px; text-align: center; border-top: 1px solid #e2e8f0; }\n          .icon-large { font-size: 48px; margin-bottom: 20px; }\n          .title { color: white; font-size: 28px; font-weight: 700; margin: 0; }\n          .subtitle { color: white; font-size: 16px; margin: 10px 0 0 0; opacity: 0.9; }\n          .message { font-size: 16px; line-height: 1.6; color: #374151; margin: 20px 0; }\n          .action-title { font-size: 18px; font-weight: 600; color: #1f2937; margin: 0 0 15px 0; }\n          .action-text { font-size: 14px; color: #6b7280; margin: 0; }\n          .support-text { font-size: 14px; color: #6b7280; margin: 30px 0 20px 0; }\n          .signature { font-size: 14px; color: #374151; margin: 20px 0; }\n          .disclaimer { font-size: 11px; color: #9ca3af; margin: 10px 0; }\n          .copyright { font-size: 11px; color: #9ca3af; margin: 5px 0; }\n        </style>\n      </head>\n      <body>\n        <div class=\"container\">\n          <!-- Header -->\n          <div class=\"header\">\n            <div class=\"icon-large\">${statusIcon}</div>\n            <h1 class=\"title\">${message.title}</h1>\n            <p class=\"subtitle\">${\n              isArabic ? \"Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±\" : \"Ticketing System\"\n            }</p>\n          </div>\n          \n          <!-- Content -->\n          <div class=\"content\">\n            <p style=\"font-size: 16px; color: #374151; margin: 0 0 20px 0;\">\n              <strong>${isArabic ? \"Ø¹Ø²ÙŠØ²ÙŠ\" : \"Dear\"} ${userName},</strong>\n            </p>\n            \n            <p class=\"message\">${message.message}</p>\n            \n            <!-- Status Card -->\n            <div class=\"status-card\">\n              <h3 class=\"action-title\">${\n                isArabic ? \"Ù…Ø§ Ø§Ù„ØªØ§Ù„ÙŠØŸ\" : \"What's Next?\"\n              }</h3>\n              <p class=\"action-text\">${message.action}</p>\n              ${\n                changeType === \"activation\" || changeType === \"otpEnabled\"\n                  ? `<a href=\"#\" class=\"action-button\" style=\"color: white; text-decoration: none;\">${\n                      isArabic ? \"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†\" : \"Log In Now\"\n                    }</a>`\n                  : \"\"\n              }\n            </div>\n            \n            <!-- Support Information -->\n            <p class=\"support-text\">\n              ${\n                isArabic\n                  ? \"Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø© Ø£Ùˆ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø³Ø§Ø¹Ø¯Ø©ØŒ Ù„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ù„Ø¯ÙŠÙ†Ø§.\"\n                  : \"If you have any questions or need assistance, please don't hesitate to contact our support team.\"\n              }\n            </p>\n            \n            <!-- Signature -->\n            <div class=\"signature\">\n              <p style=\"margin: 0; font-weight: 600;\">${common.bestRegards}</p>\n              <p style=\"margin: 5px 0 0 0; color: #6b7280;\"><strong>${\n                common.teamName\n              }</strong></p>\n            </div>\n          </div>\n          \n          <!-- Footer -->\n          <div class=\"footer\">\n            <p class=\"disclaimer\">${common.doNotReply}</p>\n            <p class=\"copyright\">Â© ${new Date().getFullYear()} ${\n      common.allRightsReserved\n    }</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n  }\n\n  /**\n   * Get text content for user status change email\n   */\n  private getUserStatusChangeText(\n    userName: string,\n    changeType: \"activation\" | \"deactivation\" | \"otpEnabled\" | \"otpDisabled\",\n    common: {\n      companyName: string;\n      bestRegards: string;\n      teamName: string;\n      doNotReply: string;\n      allRightsReserved: string;\n    },\n    isArabic: boolean\n  ): string {\n    const messages = {\n      ar: {\n        activation:\n          \"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ± Ø¨Ù†Ø¬Ø§Ø­. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©.\",\n        deactivation:\n          \"ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±. Ù„Ù† ØªØªÙ…ÙƒÙ† Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø­ØªÙ‰ ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨.\",\n        otpEnabled:\n          \"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ© Ù„Ø­Ø³Ø§Ø¨Ùƒ. Ø³ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…Ø±Ø³Ù„ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø© ØªØ³Ø¬Ù„ ÙÙŠÙ‡Ø§ Ø§Ù„Ø¯Ø®ÙˆÙ„.\",\n        otpDisabled:\n          \"ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ© Ù„Ø­Ø³Ø§Ø¨Ùƒ. Ù„Ù† ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² ØªØ­Ù‚Ù‚ Ø¥Ø¶Ø§ÙÙŠ Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.\",\n      },\n      en: {\n        activation:\n          \"Your Ticketing System account has been successfully activated. You can now log in and access all available features.\",\n        deactivation:\n          \"Your Ticketing System account has been deactivated. You will not be able to log in until the account is reactivated.\",\n        otpEnabled:\n          \"Two-factor authentication has been enabled for your account. You will need to enter a verification code sent to your email each time you log in.\",\n        otpDisabled:\n          \"Two-factor authentication has been disabled for your account. You will no longer need to enter an additional verification code when logging in.\",\n      },\n    };\n\n    const message = messages[isArabic ? \"ar\" : \"en\"][changeType];\n    const greeting = isArabic ? \"Ø¹Ø²ÙŠØ²ÙŠ\" : \"Dear\";\n    const actionText = isArabic ? \"Ù…Ø§ Ø§Ù„ØªØ§Ù„ÙŠØŸ\" : \"What's Next?\";\n    const supportText = isArabic\n      ? \"Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø© Ø£Ùˆ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø³Ø§Ø¹Ø¯Ø©ØŒ Ù„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ù„Ø¯ÙŠÙ†Ø§.\"\n      : \"If you have any questions or need assistance, please don't hesitate to contact our support team.\";\n\n    return `\n${greeting} ${userName},\n\n${message}\n\n${actionText}\n${isArabic ? \"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†\" : \"Log In Now\"}\n\n${supportText}\n\n${common.bestRegards}\n${common.teamName}\n\n---\n${common.doNotReply}\nÂ© ${new Date().getFullYear()} ${common.allRightsReserved}\n    `.trim();\n  }\n}\n\n// Create and export a singleton instance\nconst emailService = new EmailService();\nexport default emailService;\n\n// Export the class for testing purposes\nexport { EmailService };\n"],"names":[],"mappings":"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"}
module.exports=[70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},20270,(e,t,r)=>{t.exports=e.x("dotenv/config",()=>require("dotenv/config"))},21783,e=>e.a(async(t,r)=>{try{let t=await e.y("drizzle-orm/postgres-js");e.n(t),r()}catch(e){r(e)}},!0),55443,e=>e.a(async(t,r)=>{try{let t=await e.y("postgres");e.n(t),r()}catch(e){r(e)}},!0),88707,e=>e.a(async(t,r)=>{try{e.i(20270);var s=e.i(21783),a=e.i(55443),i=t([s,a]);[s,a]=i.then?(await i)():i;let n=process.env.DATABASE_URL;if(!n)throw Error("DATABASE_URL environment variable is not set");let o=(0,a.default)(n,{prepare:!1,max:10,idle_timeout:20,connect_timeout:30,max_lifetime:1800,connection:{application_name:"ticketing-system"},onnotice:()=>{},debug:void 0}),l=(0,s.drizzle)(o);"undefined"!=typeof process&&(process.on("SIGTERM",async()=>{console.log("SIGTERM received, closing database connections..."),await o.end({timeout:5})}),process.on("SIGINT",async()=>{console.log("SIGINT received, closing database connections..."),await o.end({timeout:5})})),e.s(["db",0,l]),r()}catch(e){r(e)}},!1),6224,e=>e.a(async(t,r)=>{try{var s=e.i(88707),a=e.i(78156),i=e.i(89722),n=t([s,a,i]);async function o(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let{email:r}=e.query;if(!r||"string"!=typeof r)return t.status(400).json({error:"Email parameter required"});let n={};console.log("Test 1: Simple query for email...");try{let e=await s.db.select().from(a.users).where((0,i.eq)(a.users.email,r)).limit(1);n.test1={success:!0,found:e.length>0,user:e[0]||null}}catch(e){n.test1={success:!1,error:e.message}}console.log("Test 2: Query with boolean conditions...");try{let e=await s.db.select().from(a.users).where((0,i.and)((0,i.eq)(a.users.email,r),(0,i.eq)(a.users.isActive,!0),(0,i.eq)(a.users.isDeleted,!1))).limit(1);n.test2={success:!0,found:e.length>0,user:e[0]||null}}catch(e){n.test2={success:!1,error:e.message,stack:e.stack}}console.log("Test 3: Get all partner users...");try{let e=await s.db.select({id:a.users.id,email:a.users.email,name:a.users.name,userType:a.users.userType,isActive:a.users.isActive,isDeleted:a.users.isDeleted}).from(a.users).where((0,i.eq)(a.users.userType,"partner")).limit(10);n.test3={success:!0,count:e.length,partners:e}}catch(e){n.test3={success:!1,error:e.message}}return t.status(200).json({success:!0,email:r,results:n,timestamp:new Date().toISOString()})}catch(e){return console.error("Debug endpoint error:",e),t.status(500).json({success:!1,error:e.message,stack:e.stack,timestamp:new Date().toISOString()})}}[s,a,i]=n.then?(await n)():n,e.s(["default",()=>o]),r()}catch(e){r(e)}},!1),98078,e=>e.a(async(t,r)=>{try{var s=e.i(89304),a=e.i(36438),i=e.i(90950),n=e.i(17885),o=e.i(6224),l=e.i(8911),c=e.i(95011),u=e.i(40430),d=t([o]);[o]=d.then?(await d)():d;let m=(0,n.hoist)(o,"default"),h=(0,n.hoist)(o,"config"),g=new i.PagesAPIRouteModule({definition:{kind:a.RouteKind.PAGES_API,page:"/api/debug/check-user",pathname:"/api/debug/check-user",bundlePath:"",filename:""},userland:o,distDir:".next",relativeProjectDir:""});async function p(e,t,r){g.isDev&&(0,u.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let a="/api/debug/check-user";a=a.replace(/\/index$/,"")||"/";let i=await g.prepare(e,t,{srcPage:a});if(!i){t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve());return}let{query:n,params:o,prerenderManifest:d,routerServerContext:p}=i;try{let r=e.method||"GET",s=(0,l.getTracer)(),i=s.getActiveScopeSpan(),u=g.instrumentationOnRequestError.bind(g),m=async i=>g.render(e,t,{query:{...n,...o},params:o,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:d.preview,propagateError:!1,dev:g.isDev,page:"/api/debug/check-user",internalRevalidate:null==p?void 0:p.revalidate,onError:(...t)=>u(e,...t)}).finally(()=>{if(!i)return;i.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let e=s.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=e.get("next.route");if(n){let e=`${r} ${n}`;i.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),i.updateName(e)}else i.updateName(`${r} ${a}`)});i?await m(i):await s.withPropagatedContext(e.headers,()=>s.trace(c.BaseServerSpan.handleRequest,{spanName:`${r} ${a}`,kind:l.SpanKind.SERVER,attributes:{"http.method":r,"http.target":e.url}},m))}catch(e){if(g.isDev)throw e;(0,s.sendError)(t,500,"Internal Server Error")}finally{null==r.waitUntil||r.waitUntil.call(r,Promise.resolve())}}e.s(["config",0,h,"default",0,m,"handler",()=>p]),r()}catch(e){r(e)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__fe483ebe._.js.map
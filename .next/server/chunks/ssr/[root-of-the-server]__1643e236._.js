module.exports=[60607,(a,b,c)=>{b.exports=a.x("moment",()=>require("moment"))},15330,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(47750),g=a.i(14229),h=a.i(34541),i=a.i(33292),j=a.i(60607),k=a.i(46248),l=a.i(1161),m=a.i(3750),n=a.i(24413),o=a.i(93265),p=a.i(15742),q=a.i(54006),r=a.i(81311),s=a.i(68911),t=a.i(24917),u=a.i(7116),v=a.i(75627),w=a.i(62806),x=a.i(99240),y=b([f,h,i,k,v,w,x]);function z(){let{t:a,i18n:b}=(0,f.useTranslation)("common"),c=(0,g.useRouter)(),{id:y}=c.query,z="ar"===b.language,{request:A,isLoading:B,refetch:C}=(0,k.useCustomerRequest)(y),{rateRequest:D}=(0,k.useRateRequest)(y),[E,F]=(0,e.useState)(!1),[G,H]=(0,e.useState)(0),[I,J]=(0,e.useState)(""),[K,L]=(0,e.useState)(!1),M=async()=>{if(0===G)return void v.toast.error(a("customer.pleaseSelectRating"));try{L(!0),await D({rating:G,feedback:I}),v.toast.success(a("customer.thankYouForRating")),F(!1),C()}catch(c){let b=c instanceof Error?c.message:c?.response?.data?.message||a("errors.generic");v.toast.error(b)}finally{L(!1)}};if(B)return(0,d.jsx)(h.default,{children:(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,d.jsx)(s.Loader2,{className:"h-8 w-8 animate-spin text-primary-600"})})});if(!A)return(0,d.jsx)(h.default,{children:(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(t.AlertCircle,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:a("customer.requestNotFound")}),(0,d.jsxs)("button",{onClick:()=>c.push("/customer/requests"),className:"mt-4 text-primary-600 hover:text-primary-700",children:["â† ",a("customer.backToRequests")]})]})});let N="completed"===A.status&&!A.rating;return(0,d.jsx)(h.default,{children:(0,d.jsx)("div",{dir:z?"rtl":"ltr",className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,d.jsx)(i.BlurFade,{delay:.1,children:(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsxs)("button",{onClick:()=>c.push("/customer/requests"),className:"inline-flex items-center text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors mb-6",children:[(0,d.jsx)(l.ArrowLeft,{className:`h-4 w-4 ${z?"ml-2":"mr-2"}`}),a("customer.backToRequests")]}),(0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 md:p-8",children:(0,d.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,d.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:A.requestNumber}),(0,d.jsx)("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${{submitted:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",unassigned:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300",assigned:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300",confirmed:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-300",in_progress:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",completed:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300",closed:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",rejected:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300"}[A.status]||"bg-gray-100 text-gray-800"}`,children:a(`customer.requestStatus.${A.status}`)})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,d.jsx)(p.Clock,{className:"h-4 w-4"}),(0,d.jsxs)("span",{children:[a("customer.submitted")," ",(0,j.default)(A.submittedAt).format("LLL")]})]})]})})})]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,d.jsx)(i.BlurFade,{delay:.2,children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/20 rounded-lg",children:(0,d.jsx)(n.Package,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}),(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a("customer.serviceDetails")})]}),(0,d.jsxs)("dl",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:a("customer.category")}),(0,d.jsx)("dd",{className:"text-sm font-semibold text-gray-900 dark:text-white text-right",children:"ar"===b.language?A.categoryNameAr:A.categoryName})]}),A.serviceName&&(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:a("customer.service")}),(0,d.jsx)("dd",{className:"text-sm font-semibold text-gray-900 dark:text-white text-right",children:"ar"===b.language?A.serviceNameAr:A.serviceName})]}),(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:a("customer.pickupOption")}),(0,d.jsx)("dd",{className:"text-sm font-semibold text-gray-900 dark:text-white text-right",children:"ar"===b.language?A.pickupOptionNameAr:A.pickupOptionName})]})]})]})}),(0,d.jsx)(i.BlurFade,{delay:.3,children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:(0,d.jsx)(m.MapPin,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a("customer.location")})]}),(0,d.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg mb-4",children:[(0,d.jsx)(m.MapPin,{className:"h-5 w-5 text-gray-400 shrink-0 mt-0.5"}),(0,d.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:A.customerAddress})]}),(0,d.jsx)("div",{className:"h-64 w-full rounded-lg overflow-hidden border border-gray-300 dark:border-gray-700 mb-4",children:(0,d.jsx)(x.default,{latitude:A.customerLat,longitude:A.customerLng,zoom:14,draggableMarker:!1})}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,d.jsx)("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700"}),(0,d.jsxs)("span",{children:["Lat: ",A.customerLat.toFixed(6),", Lng:"," ",A.customerLng.toFixed(6)]}),(0,d.jsx)("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700"})]})]})}),A.partnerName&&(0,d.jsx)(i.BlurFade,{delay:.4,children:(0,d.jsxs)("div",{className:"bg-linear-to-br from-primary-50 to-blue-50 dark:from-primary-900/20 dark:to-blue-900/20 rounded-xl shadow-sm border border-primary-200 dark:border-primary-800 p-6 hover:shadow-md transition-shadow",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-primary-200 dark:border-primary-800",children:[(0,d.jsx)("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:(0,d.jsx)(o.Building2,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}),(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a("customer.assignedPartner")})]}),(0,d.jsxs)("dl",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("customer.partner")}),(0,d.jsx)("dd",{className:"text-sm font-bold text-primary-700 dark:text-primary-300 text-right",children:A.partnerName})]}),A.branchName&&(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("customer.branch")}),(0,d.jsx)("dd",{className:"text-sm font-semibold text-gray-900 dark:text-white text-right",children:A.branchName})]})]})]})}),(N||A.rating)&&(0,d.jsx)(i.BlurFade,{delay:.5,children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg",children:(0,d.jsx)(r.Star,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:A.rating?a("customer.yourRating"):a("customer.rateService")})]}),A.rating?(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[[void 0,void 0,void 0,void 0,void 0].map((a,b)=>(0,d.jsx)(r.Star,{className:`h-7 w-7 ${b<A.rating?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"}`},b)),(0,d.jsxs)("span",{className:"ml-2 text-lg font-semibold text-gray-900 dark:text-white",children:[A.rating,"/5"]})]}),A.feedback&&(0,d.jsx)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:(0,d.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300 italic",children:["â€œ",A.feedback,"â€"]})})]}):E?(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"flex items-center justify-center gap-3 mb-6 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:[void 0,void 0,void 0,void 0,void 0].map((a,b)=>(0,d.jsx)("button",{type:"button",onClick:()=>H(b+1),className:"focus:outline-none transform hover:scale-110 transition-transform",children:(0,d.jsx)(r.Star,{className:`h-10 w-10 transition-all ${b<G?"fill-yellow-400 text-yellow-400 drop-shadow-lg":"text-gray-300 hover:text-yellow-200"}`})},b))}),G>0&&(0,d.jsxs)("p",{className:"text-center text-sm font-medium text-gray-600 dark:text-gray-400 mb-4",children:[5===G&&"â­ Excellent!",4===G&&"ðŸ‘ Great!",3===G&&"ðŸ˜Š Good",2===G&&"ðŸ¤” Fair",1===G&&"ðŸ˜• Poor"]}),(0,d.jsx)("textarea",{value:I,onChange:a=>J(a.target.value),placeholder:a("customer.feedbackPlaceholder"),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-900 dark:text-white mb-4 resize-none",rows:4}),(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsx)(w.ShimmerButton,{type:"button",onClick:M,disabled:K||0===G,className:"flex-1",children:K?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Loader2,{className:`h-4 w-4 animate-spin ${z?"ml-2":"mr-2"}`}),a("customer.submitting")]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(q.CheckCircle2,{className:`h-4 w-4 ${z?"ml-2":"mr-2"}`}),a("customer.submitRating")]})}),(0,d.jsx)("button",{type:"button",onClick:()=>{F(!1),H(0),J("")},className:"px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:a("common.cancel")})]})]}):(0,d.jsxs)("button",{onClick:()=>F(!0),className:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-linear-to-r from-primary-600 to-blue-600 hover:from-primary-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all",children:[(0,d.jsx)(r.Star,{className:`h-5 w-5 ${z?"ml-2":"mr-2"}`}),a("customer.rateService")]})]})})]}),(0,d.jsx)("div",{children:(0,d.jsx)(i.BlurFade,{delay:.2,children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 sticky top-6",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:(0,d.jsx)(p.Clock,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a("customer.timeline")})]}),(0,d.jsxs)("div",{className:"relative space-y-6",children:[(0,d.jsx)("div",{className:"absolute left-4 top-4 bottom-4 w-0.5 bg-linear-to-b from-blue-200 via-purple-200 to-green-200 dark:from-blue-800 dark:via-purple-800 dark:to-green-800"}),A.submittedAt&&(0,d.jsxs)("div",{className:"relative flex gap-4 pl-2",children:[(0,d.jsx)("div",{className:"shrink-0 z-10",children:(0,d.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-500 dark:bg-blue-600 flex items-center justify-center ring-4 ring-white dark:ring-gray-800 shadow-lg",children:(0,d.jsx)(q.CheckCircle2,{className:"h-4 w-4 text-white"})})}),(0,d.jsxs)("div",{className:"flex-1 pb-2",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:a("customer.requestStatus.submitted")}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:(0,u.format)(new Date(A.submittedAt),"PPp")})]})]}),A.assignedAt&&(0,d.jsxs)("div",{className:"relative flex gap-4 pl-2",children:[(0,d.jsx)("div",{className:"shrink-0 z-10",children:(0,d.jsx)("div",{className:"h-8 w-8 rounded-full bg-purple-500 dark:bg-purple-600 flex items-center justify-center ring-4 ring-white dark:ring-gray-800 shadow-lg",children:(0,d.jsx)(q.CheckCircle2,{className:"h-4 w-4 text-white"})})}),(0,d.jsxs)("div",{className:"flex-1 pb-2",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:a("customer.requestStatus.assigned")}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:(0,u.format)(new Date(A.assignedAt),"PPp")})]})]}),A.confirmedAt&&(0,d.jsxs)("div",{className:"relative flex gap-4 pl-2",children:[(0,d.jsx)("div",{className:"shrink-0 z-10",children:(0,d.jsx)("div",{className:"h-8 w-8 rounded-full bg-indigo-500 dark:bg-indigo-600 flex items-center justify-center ring-4 ring-white dark:ring-gray-800 shadow-lg",children:(0,d.jsx)(q.CheckCircle2,{className:"h-4 w-4 text-white"})})}),(0,d.jsxs)("div",{className:"flex-1 pb-2",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:a("customer.requestStatus.confirmed")}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:(0,u.format)(new Date(A.confirmedAt),"PPp")})]})]}),A.inProgressAt&&(0,d.jsxs)("div",{className:"relative flex gap-4 pl-2",children:[(0,d.jsx)("div",{className:"shrink-0 z-10",children:(0,d.jsx)("div",{className:"h-8 w-8 rounded-full bg-yellow-500 dark:bg-yellow-600 flex items-center justify-center ring-4 ring-white dark:ring-gray-800 shadow-lg",children:(0,d.jsx)(p.Clock,{className:"h-4 w-4 text-white animate-pulse"})})}),(0,d.jsxs)("div",{className:"flex-1 pb-2",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:a("customer.requestStatus.inProgress")}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:(0,u.format)(new Date(A.inProgressAt),"PPp")})]})]}),A.completedAt&&(0,d.jsxs)("div",{className:"relative flex gap-4 pl-2",children:[(0,d.jsx)("div",{className:"shrink-0 z-10",children:(0,d.jsx)("div",{className:"h-8 w-8 rounded-full bg-green-500 dark:bg-green-600 flex items-center justify-center ring-4 ring-white dark:ring-gray-800 shadow-lg",children:(0,d.jsx)(q.CheckCircle2,{className:"h-4 w-4 text-white"})})}),(0,d.jsxs)("div",{className:"flex-1 pb-2",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:a("customer.requestStatus.completed")}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:(0,u.format)(new Date(A.completedAt),"PPp")})]})]}),A.closedAt&&(0,d.jsxs)("div",{className:"relative flex gap-4 pl-2",children:[(0,d.jsx)("div",{className:"shrink-0 z-10",children:(0,d.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-500 dark:bg-gray-600 flex items-center justify-center ring-4 ring-white dark:ring-gray-800 shadow-lg",children:(0,d.jsx)(q.CheckCircle2,{className:"h-4 w-4 text-white"})})}),(0,d.jsxs)("div",{className:"flex-1 pb-2",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:a("customer.requestStatus.closed")}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:(0,u.format)(new Date(A.closedAt),"PPp")})]})]})]})]})})})]})]})})})}[f,h,i,k,v,w,x]=y.then?(await y)():y,a.s(["default",()=>z]),c()}catch(a){c(a)}},!1),75819,a=>a.a(async(b,c)=>{try{var d=a.i(65898),e=a.i(24244),f=a.i(67175),g=a.i(14924),h=a.i(85634),i=a.i(15330),j=a.i(91213),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/customer/requests/[id]",pathname:"/customer/requests/[id]",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/customer/requests/[id]",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__1643e236._.js.map
module.exports=[67598,a=>{"use strict";let b=(0,a.i(13792).default)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);a.s(["Car",()=>b],67598)},31908,a=>a.a(async(b,c)=>{try{var d=a.i(97010),e=b([d]);[d]=e.then?(await e)():e;let f=d.z.object({categoryId:d.z.number().int().positive("Category ID must be positive"),serviceId:d.z.number().int().positive("Service ID must be positive").optional(),pickupOptionId:d.z.number().int().positive("Pickup option ID must be positive"),customerName:d.z.string().min(2,"Customer name must be at least 2 characters"),customerPhone:d.z.string().min(10,"Phone number must be at least 10 characters"),customerLat:d.z.number().min(-90).max(90,"Latitude must be between -90 and 90"),customerLng:d.z.number().min(-180).max(180,"Longitude must be between -180 and 180"),customerAddress:d.z.string().min(5,"Address must be at least 5 characters")});d.z.object({partnerId:d.z.number().int().positive("Partner ID must be positive"),branchId:d.z.number().int().positive("Branch ID must be positive")}),d.z.object({status:d.z.enum(["confirmed","in_progress","completed","rejected"]),notes:d.z.string().optional(),rejectionReason:d.z.string().optional().refine(()=>!0,"Rejection reason is required when status is rejected")}),d.z.object({rating:d.z.number().int().min(1).max(5,"Rating must be between 1 and 5"),feedback:d.z.string().optional()});let g=d.z.preprocess(a=>{if(null==a||""===a)return;let b=Number(a);return isNaN(b)?void 0:b},d.z.number().optional()),h=d.z.preprocess(a=>{if(null==a||""===a)return 1;let b=Number(a);return isNaN(b)?1:b},d.z.number()),i=d.z.object({customerName:d.z.string().optional(),customerPhone:d.z.string().optional(),status:d.z.enum(["submitted","assigned","confirmed","in_progress","completed","closed","rejected","unassigned"]).optional(),categoryId:g.refine(a=>void 0===a||a>0,{message:"Category ID must be positive"}),partnerId:g.refine(a=>void 0===a||a>0,{message:"Partner ID must be positive"}),branchId:g.refine(a=>void 0===a||a>0,{message:"Branch ID must be positive"}),dateFrom:d.z.string().datetime().optional(),dateTo:d.z.string().datetime().optional(),page:h.refine(a=>a>=1,{message:"Page must be at least 1"}),limit:h.refine(a=>a>=1&&a<=100,{message:"Limit must be between 1 and 100"}),pickupOptionId:g.refine(a=>void 0===a||a>0,{message:"Pickup option ID must be positive"}),serviceId:g.refine(a=>void 0===a||a>0,{message:"Service ID must be positive"}),sortBy:d.z.enum(["createdAt","updatedAt","submittedAt","assignedAt","completedAt"]).default("createdAt"),sortOrder:d.z.enum(["asc","desc"]).default("desc")});d.z.object({query:d.z.string().min(1,"Search query is required"),filters:i.optional()}),a.s(["createRequestSchema",0,f]),c()}catch(a){c(a)}},!1),9694,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(47750),g=a.i(14229),h=a.i(34541),i=a.i(33292),j=a.i(99240),k=a.i(3750),l=a.i(88410),m=a.i(81958),n=a.i(68911),o=a.i(71353),p=a.i(24917),q=a.i(62805),r=a.i(24413),s=a.i(67598),t=a.i(54006),u=a.i(75627),v=a.i(6197),w=a.i(48155),x=a.i(31908),y=a.i(90055),z=a.i(72452),A=a.i(75672),B=a.i(46248),C=a.i(62806),D=b([f,h,i,j,u,v,w,x,y,z,A,B,C]);function E(){let{t:a,i18n:b}=(0,f.useTranslation)("common"),c=(0,g.useRouter)(),D="ar"===b.language,{createRequest:E}=(0,B.useCreateRequest)(),{register:F,handleSubmit:G,setValue:H,control:I,formState:{errors:J,isSubmitting:K}}=(0,v.useForm)({resolver:(0,w.zodResolver)(x.createRequestSchema),defaultValues:{customerLat:24.7136,customerLng:46.6753,customerName:"",customerPhone:"",customerAddress:""}}),L=(0,v.useWatch)({control:I,name:"categoryId"}),M=(0,v.useWatch)({control:I,name:"pickupOptionId"}),N=(0,v.useWatch)({control:I,name:"customerLat"}),O=(0,v.useWatch)({control:I,name:"customerLng"}),{categories:P,isLoading:Q}=(0,y.useCategories)(),{pickupOptions:R,isLoading:S}=(0,z.usePickupOptions)(),{services:T,isLoading:U}=(0,A.useServices)(L),V=R?.find(a=>a.id===M),W=!!V?.requiresServiceSelection;(0,e.useEffect)(()=>{L&&!W&&H("serviceId",void 0)},[L,W,H]);let X=async b=>{try{let e=await E(b);u.toast.custom((0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 max-w-md",children:(0,d.jsxs)("div",{className:"flex items-start",children:[(0,d.jsx)("div",{className:"shrink-0",children:(0,d.jsx)(t.CheckCircle2,{className:"h-6 w-6 text-green-500"})}),(0,d.jsxs)("div",{className:`${D?"mr-3":"ml-3"}`,children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a("customer.requestSubmitted")}),(0,d.jsxs)("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,d.jsxs)("p",{children:[a("customer.requestNumber"),":"," ",(0,d.jsx)("strong",{className:"text-primary-600 dark:text-primary-400",children:e.requestNumber})]}),(0,d.jsx)("p",{className:"mt-1",children:a("customer.trackYourRequest")})]}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsxs)("button",{onClick:()=>c.push(`/customer/requests/${e.requestNumber}`),className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:[a("customer.viewRequest")," â†’"]})})]})]})}),{duration:8e3}),c.push(`/customer/requests/${e.requestNumber}`)}catch(c){let b=c instanceof Error?c.message:c?.response?.data?.message||a("errors.generic");u.toast.error(b)}};return(0,d.jsx)(h.default,{children:(0,d.jsx)("div",{className:"min-h-screen bg-linear-to-br from-gray-50 to-gray-100 dark:from-black dark:to-gray-900 py-12 px-4",dir:D?"rtl":"ltr",children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,d.jsxs)(i.BlurFade,{delay:.1,className:"text-center mb-8",children:[(0,d.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:a("customer.newRequest")}),(0,d.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:a("customer.newRequestDescription")})]}),(0,d.jsx)(i.BlurFade,{delay:.2,children:(0,d.jsx)("div",{className:"p-8 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:(0,d.jsxs)("form",{onSubmit:G(X),className:"space-y-8",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white border-b pb-2 mb-6",children:a("customer.serviceDetails")}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(q.Tag,{className:"inline h-4 w-4 mr-2"}),a("customer.selectCategory")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("select",{id:"categoryId",...F("categoryId",{valueAsNumber:!0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-black dark:border-gray-700 dark:text-white",children:[(0,d.jsx)("option",{value:"",children:a("customer.selectCategory")}),Q?(0,d.jsx)("option",{disabled:!0,children:a("common.loading")}):P?.map(a=>(0,d.jsx)("option",{value:a.id,children:"ar"===b.language?a.nameAr:a.name},a.id))]}),J.categoryId&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),J.categoryId.message]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"pickupOptionId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(r.Package,{className:"inline h-4 w-4 mr-2"}),a("customer.selectPickupOption")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("select",{id:"pickupOptionId",...F("pickupOptionId",{valueAsNumber:!0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-black dark:border-gray-700 dark:text-white",children:[(0,d.jsx)("option",{value:"",children:a("customer.selectPickupOption")}),S?(0,d.jsx)("option",{disabled:!0,children:a("common.loading")}):R?.map(a=>(0,d.jsx)("option",{value:a.id,children:"ar"===b.language?a.nameAr??a.name:a.name},a.id))]}),J.pickupOptionId&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),J.pickupOptionId.message]})]}),W&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"serviceId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(s.Car,{className:"inline h-4 w-4 mr-2"}),a("customer.selectService")]}),(0,d.jsxs)("select",{id:"serviceId",...F("serviceId",{valueAsNumber:!0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-black dark:border-gray-700 dark:text-white",disabled:!L||U,children:[(0,d.jsx)("option",{value:"",children:a("customer.selectService")}),U?(0,d.jsx)("option",{disabled:!0,children:a("common.loading")}):T?.map(a=>(0,d.jsx)("option",{value:a.id,children:"ar"===b.language?a.nameAr:a.name},a.id))]}),J.serviceId&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),J.serviceId.message]})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white border-b pb-2 mb-6",children:a("customer.yourInformation")}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"customerName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(l.User,{className:"inline h-4 w-4 mr-2"}),a("customer.yourName")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{id:"customerName",type:"text",...F("customerName"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-black dark:border-gray-700 dark:text-white",placeholder:a("customer.yourNamePlaceholder")}),J.customerName&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),J.customerName.message]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"customerPhone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(m.Phone,{className:"inline h-4 w-4 mr-2"}),a("customer.yourPhone")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{id:"customerPhone",type:"tel",...F("customerPhone"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-black dark:border-gray-700 dark:text-white",placeholder:"+966 XXX XXX XXX"}),J.customerPhone&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),J.customerPhone.message]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"customerAddress",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(k.MapPin,{className:"inline h-4 w-4 mr-2"}),a("customer.yourAddress")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{id:"customerAddress",type:"text",...F("customerAddress"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-black dark:border-gray-700 dark:text-white",placeholder:a("customer.yourAddressPlaceholder")}),J.customerAddress&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),J.customerAddress.message]})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white border-b pb-2 mb-6",children:a("customer.yourLocation")}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsxs)("button",{type:"button",onClick:()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(b=>{let{latitude:c,longitude:d}=b.coords;H("customerLat",c),H("customerLng",d),u.toast.success(a("customer.locationUpdated"))},b=>{u.toast.error(a("customer.locationError")),console.error("Geolocation error:",b)}):u.toast.error(a("customer.geolocationNotSupported"))},className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,d.jsx)(k.MapPin,{className:"h-4 w-4 mr-2"}),a("customer.useMyLocation")]})}),(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:a("customer.clickMapInstructions")}),(0,d.jsx)("div",{className:"h-96 w-full rounded-lg overflow-hidden border border-gray-300 dark:border-gray-700",children:(0,d.jsx)(j.default,{latitude:N,longitude:O,onLocationChange:(b,c)=>{H("customerLat",b),H("customerLng",c),u.toast.success(a("customer.locationUpdated"))},draggableMarker:!0,zoom:12})}),(J.customerLat||J.customerLng)&&(0,d.jsxs)("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),a("customer.locationRequired")]})]}),(0,d.jsx)("div",{className:"flex justify-center pt-6",children:(0,d.jsx)(C.ShimmerButton,{type:"submit",className:"inline-flex items-center px-8 py-4 border border-transparent text-base font-medium rounded-lg shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",disabled:K,children:K?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}),a("customer.submitting")]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Send,{className:"mr-2 h-5 w-5"}),a("customer.submitRequest")]})})})]})})})]})})})}[f,h,i,j,u,v,w,x,y,z,A,B,C]=D.then?(await D)():D,a.s(["default",()=>E]),c()}catch(a){c(a)}},!1),44946,a=>a.a(async(b,c)=>{try{var d=a.i(65898),e=a.i(24244),f=a.i(67175),g=a.i(14924),h=a.i(85634),i=a.i(9694),j=a.i(91213),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/customer/requests/new",pathname:"/customer/requests/new",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/customer/requests/new",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=projects_ticketing-platform_a9f6e215._.js.map
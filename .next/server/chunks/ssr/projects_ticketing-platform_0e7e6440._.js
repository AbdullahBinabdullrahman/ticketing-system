module.exports=[32379,a=>{"use strict";let b=(0,a.i(13792).default)("map-pinned",[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]]);a.s(["MapPinned",()=>b],32379)},12820,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(47750),g=a.i(14229),h=a.i(79336),i=a.i(96522),j=a.i(33292),k=a.i(73632),l=a.i(99240),m=a.i(93265),n=a.i(1161),o=a.i(3750),p=a.i(88410),q=a.i(81958),r=a.i(32379),s=a.i(79763),t=a.i(68911),u=a.i(14694),v=a.i(24917),w=a.i(75627),x=a.i(34791),y=a.i(68382),z=b([f,h,i,j,k,l,w,x,y]);function A(){let{t:a,i18n:b}=(0,f.useTranslation)("common"),c=(0,g.useRouter)(),{id:z}=c.query,A=z?parseInt(z):null,B="ar"===b.language,{partner:C,isLoading:D}=(0,i.usePartner)(A),[E,F]=(0,e.useState)({name:"",lat:"",lng:"",contactName:"",phone:"",address:"",radiusKm:"10"}),[G,H]=(0,e.useState)({}),[I,J]=(0,e.useState)(null),[K,L]=(0,e.useState)(!1),M=a=>{let{name:b,value:c}=a.target;F(a=>({...a,[b]:c})),G[b]&&H(a=>{let c={...a};return delete c[b],c})},N=async b=>{let d,e,f,g;if(b.preventDefault(),d={},(!E.name||E.name.length<2)&&(d.name=a("validation.branchNameRequired")),e=parseFloat(E.lat),(!E.lat||isNaN(e)||e<-90||e>90)&&(d.lat=a("validation.validLatitudeRequired")),f=parseFloat(E.lng),(!E.lng||isNaN(f)||f<-180||f>180)&&(d.lng=a("validation.validLongitudeRequired")),(!E.contactName||E.contactName.length<2)&&(d.contactName=a("validation.contactNameRequired")),(!E.phone||E.phone.length<10)&&(d.phone=a("validation.phoneRequired")),(!E.address||E.address.length<5)&&(d.address=a("validation.addressRequired")),g=parseFloat(E.radiusKm),(!E.radiusKm||isNaN(g)||g<.1||g>100)&&(d.radiusKm=a("validation.validRadiusRequired")),H(d),0!==Object.keys(d).length)return void w.toast.error(a("validation.pleaseFixErrors"));L(!0);try{let b=localStorage.getItem("adminToken");(await y.default.post("/admin/branches",{partnerId:A,name:E.name,lat:parseFloat(E.lat),lng:parseFloat(E.lng),contactName:E.contactName,phone:E.phone,address:E.address,radiusKm:parseFloat(E.radiusKm)},{headers:{Authorization:`Bearer ${b}`}})).data.success&&(w.toast.success(a("success.branchCreated")),c.push(`/admin/partners/${A}`))}catch(b){console.error("Branch creation error:",b),w.toast.error(b instanceof Error?b.message:a("errors.generic"))}finally{L(!1)}};return D?(0,d.jsx)(h.default,{children:(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",dir:B?"rtl":"ltr",children:(0,d.jsxs)(x.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:[(0,d.jsx)(t.Loader2,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-indigo-600"}),(0,d.jsx)("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:a("common.loading")})]})})}):C?(0,d.jsx)(h.default,{children:(0,d.jsx)("div",{className:"min-h-screen py-8 px-4 sm:px-6 lg:px-8 bg-gray-50 dark:bg-gray-900",dir:B?"rtl":"ltr",children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,d.jsx)(j.BlurFade,{delay:.1,children:(0,d.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("button",{onClick:()=>c.back(),className:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:(0,d.jsx)(n.ArrowLeft,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a("branches.newBranch")}),(0,d.jsx)("p",{className:"text-sm mt-1 text-gray-600 dark:text-gray-400",children:C.name})]})]})})}),(0,d.jsx)(j.BlurFade,{delay:.2,children:(0,d.jsx)(k.MagicCard,{className:"p-8 bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:(0,d.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"name",className:"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:[a("branches.branchName")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:`absolute inset-y-0 ${B?"right-0 pr-3":"left-0 pl-3"} flex items-center pointer-events-none`,children:(0,d.jsx)(m.Building2,{className:`h-5 w-5 transition-colors duration-200 ${"name"===I?"text-indigo-600":"text-gray-400"}`})}),(0,d.jsx)("input",{id:"name",name:"name",type:"text",required:!0,value:E.name,onChange:M,onFocus:()=>J("name"),onBlur:()=>J(null),className:`block w-full ${B?"pr-11 pl-4":"pl-11 pr-4"} py-3 border-2 rounded-xl focus:outline-none transition-all duration-200 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 ${G.name?"border-red-500":"name"===I?"border-indigo-500 ring-2 ring-indigo-200":"border-gray-300 dark:border-gray-600"}`,placeholder:a("branches.enterBranchName")})]}),G.name&&(0,d.jsxs)("p",{className:"mt-1 text-sm flex items-center gap-1 text-red-500",children:[(0,d.jsx)(v.AlertCircle,{className:"h-4 w-4"}),G.name]})]}),(0,d.jsxs)("div",{className:"p-4 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,d.jsx)(o.MapPin,{className:"h-5 w-5 text-indigo-600"}),a("branches.coordinates")]}),(0,d.jsxs)("button",{type:"button",onClick:()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(b=>{F(a=>({...a,lat:b.coords.latitude.toFixed(6),lng:b.coords.longitude.toFixed(6)})),w.toast.success(a("success.locationDetected"))},b=>{w.toast.error(a("errors.locationAccessDenied")),console.error("Geolocation error:",b)}):w.toast.error(a("errors.geolocationNotSupported"))},className:"px-3 py-1.5 text-xs font-medium rounded-lg transition-colors flex items-center gap-1 bg-white dark:bg-gray-800 text-indigo-600 border border-indigo-300 dark:border-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30",children:[(0,d.jsx)(s.Navigation,{className:"h-3 w-3"}),a("branches.useCurrentLocation")]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"lat",className:"block text-sm font-medium mb-2 text-gray-600 dark:text-gray-400",children:[a("branches.latitude")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{id:"lat",name:"lat",type:"text",required:!0,value:E.lat,onChange:M,onFocus:()=>J("lat"),onBlur:()=>J(null),className:`block w-full px-4 py-3 border-2 rounded-xl focus:outline-none transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 ${G.lat?"border-red-500":"lat"===I?"border-indigo-500 ring-2 ring-indigo-200":"border-gray-300 dark:border-gray-600"}`,placeholder:"24.7136"}),G.lat&&(0,d.jsxs)("p",{className:"mt-1 text-xs flex items-center gap-1 text-red-500",children:[(0,d.jsx)(v.AlertCircle,{className:"h-3 w-3"}),G.lat]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"lng",className:"block text-sm font-medium mb-2 text-gray-600 dark:text-gray-400",children:[a("branches.longitude")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{id:"lng",name:"lng",type:"text",required:!0,value:E.lng,onChange:M,onFocus:()=>J("lng"),onBlur:()=>J(null),className:`block w-full px-4 py-3 border-2 rounded-xl focus:outline-none transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 ${G.lng?"border-red-500":"lng"===I?"border-indigo-500 ring-2 ring-indigo-200":"border-gray-300 dark:border-gray-600"}`,placeholder:"46.6753"}),G.lng&&(0,d.jsxs)("p",{className:"mt-1 text-xs flex items-center gap-1 text-red-500",children:[(0,d.jsx)(v.AlertCircle,{className:"h-3 w-3"}),G.lng]})]})]})]}),E.lat&&E.lng&&!isNaN(parseFloat(E.lat))&&!isNaN(parseFloat(E.lng))&&(0,d.jsx)(j.BlurFade,{delay:.3,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[(0,d.jsx)(r.MapPinned,{className:"h-5 w-5 text-indigo-600"}),a("branches.mapPreview","Map Preview")]}),(0,d.jsx)(l.default,{latitude:parseFloat(E.lat),longitude:parseFloat(E.lng),onLocationChange:(a,b)=>{F({...E,lat:a.toFixed(6),lng:b.toFixed(6)})},draggableMarker:!0,className:"h-[400px] w-full border-2 border-gray-200 dark:border-gray-700",zoom:14})]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"contactName",className:"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:[a("branches.contactName")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:`absolute inset-y-0 ${B?"right-0 pr-3":"left-0 pl-3"} flex items-center pointer-events-none`,children:(0,d.jsx)(p.User,{className:`h-5 w-5 transition-colors duration-200 ${"contactName"===I?"text-indigo-600":"text-gray-400"}`})}),(0,d.jsx)("input",{id:"contactName",name:"contactName",type:"text",required:!0,value:E.contactName,onChange:M,onFocus:()=>J("contactName"),onBlur:()=>J(null),className:`block w-full ${B?"pr-11 pl-4":"pl-11 pr-4"} py-3 border-2 rounded-xl focus:outline-none transition-all duration-200 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 ${G.contactName?"border-red-500":"contactName"===I?"border-indigo-500 ring-2 ring-indigo-200":"border-gray-300 dark:border-gray-600"}`,placeholder:a("branches.enterContactName")})]}),G.contactName&&(0,d.jsxs)("p",{className:"mt-1 text-sm flex items-center gap-1 text-red-500",children:[(0,d.jsx)(v.AlertCircle,{className:"h-4 w-4"}),G.contactName]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"phone",className:"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:[a("branches.phone")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:`absolute inset-y-0 ${B?"right-0 pr-3":"left-0 pl-3"} flex items-center pointer-events-none`,children:(0,d.jsx)(q.Phone,{className:`h-5 w-5 transition-colors duration-200 ${"phone"===I?"text-indigo-600":"text-gray-400"}`})}),(0,d.jsx)("input",{id:"phone",name:"phone",type:"tel",required:!0,value:E.phone,onChange:M,onFocus:()=>J("phone"),onBlur:()=>J(null),className:`block w-full ${B?"pr-11 pl-4":"pl-11 pr-4"} py-3 border-2 rounded-xl focus:outline-none transition-all duration-200 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 ${G.phone?"border-red-500":"phone"===I?"border-indigo-500 ring-2 ring-indigo-200":"border-gray-300 dark:border-gray-600"}`,placeholder:"+966 50 123 4567"})]}),G.phone&&(0,d.jsxs)("p",{className:"mt-1 text-sm flex items-center gap-1 text-red-500",children:[(0,d.jsx)(v.AlertCircle,{className:"h-4 w-4"}),G.phone]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"address",className:"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:[a("branches.address")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:`absolute top-3 ${B?"right-0 pr-3":"left-0 pl-3"} flex items-start pointer-events-none`,children:(0,d.jsx)(r.MapPinned,{className:`h-5 w-5 transition-colors duration-200 ${"address"===I?"text-indigo-600":"text-gray-400"}`})}),(0,d.jsx)("textarea",{id:"address",name:"address",rows:3,required:!0,value:E.address,onChange:M,onFocus:()=>J("address"),onBlur:()=>J(null),className:`block w-full ${B?"pr-11 pl-4":"pl-11 pr-4"} py-3 border-2 rounded-xl focus:outline-none transition-all duration-200 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 ${G.address?"border-red-500":"address"===I?"border-indigo-500 ring-2 ring-indigo-200":"border-gray-300 dark:border-gray-600"}`,placeholder:a("branches.enterAddress")})]}),G.address&&(0,d.jsxs)("p",{className:"mt-1 text-sm flex items-center gap-1 text-red-500",children:[(0,d.jsx)(v.AlertCircle,{className:"h-4 w-4"}),G.address]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"radiusKm",className:"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:[a("branches.radius")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{id:"radiusKm",name:"radiusKm",type:"number",step:"0.1",min:"0.1",max:"100",required:!0,value:E.radiusKm,onChange:M,onFocus:()=>J("radiusKm"),onBlur:()=>J(null),className:`block w-full px-4 py-3 border-2 rounded-xl focus:outline-none transition-all duration-200 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 ${G.radiusKm?"border-red-500":"radiusKm"===I?"border-indigo-500 ring-2 ring-indigo-200":"border-gray-300 dark:border-gray-600"}`}),(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:a("branches.radiusHelper")}),G.radiusKm&&(0,d.jsxs)("p",{className:"mt-1 text-sm flex items-center gap-1 text-red-500",children:[(0,d.jsx)(v.AlertCircle,{className:"h-4 w-4"}),G.radiusKm]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("button",{type:"button",onClick:()=>c.back(),className:"px-6 py-3 rounded-xl font-semibold transition-colors bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-700",children:a("common.cancel")}),(0,d.jsx)(x.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:K,className:"px-6 py-3 rounded-xl font-semibold transition-all duration-200 flex items-center gap-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:K?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.Loader2,{className:"h-5 w-5 animate-spin"}),a("common.creating")]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.Save,{className:"h-5 w-5"}),a("branches.createBranch")]})})]})]})})})]})})}):(0,d.jsx)(h.default,{children:(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",dir:B?"rtl":"ltr",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(m.Building2,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),(0,d.jsx)("h2",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:a("partners.notFound")}),(0,d.jsx)("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:a("partners.notFoundDescription")}),(0,d.jsx)("button",{onClick:()=>c.push("/admin/partners"),className:"px-4 py-2 rounded-lg transition-colors bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:a("partners.backToList")})]})})})}[f,h,i,j,k,l,w,x,y]=z.then?(await z)():z,a.s(["default",()=>A]),c()}catch(a){c(a)}},!1),21142,a=>a.a(async(b,c)=>{try{var d=a.i(65898),e=a.i(24244),f=a.i(67175),g=a.i(14924),h=a.i(85634),i=a.i(12820),j=a.i(91213),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/partners/[id]/branches/new",pathname:"/admin/partners/[id]/branches/new",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/partners/[id]/branches/new",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=projects_ticketing-platform_0e7e6440._.js.map
module.exports=[43753,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(47750),f=a.i(14229),g=a.i(79336),h=a.i(33292),i=a.i(99240),j=a.i(1161),k=a.i(3750),l=a.i(88410),m=a.i(81958),n=a.i(68911),o=a.i(71353),p=a.i(24917),q=a.i(62805),r=a.i(24413),s=a.i(74700),t=a.i(54006),u=a.i(75627),v=a.i(6197),w=a.i(48155),x=a.i(97010),y=a.i(90055),z=a.i(72452),A=a.i(75672),B=a.i(68382),C=b([e,g,h,i,u,v,w,x,y,z,A,B]);[e,g,h,i,u,v,w,x,y,z,A,B]=C.then?(await C)():C;let E=x.z.object({customerName:x.z.string().min(2,"Name must be at least 2 characters"),customerPhone:x.z.string().min(10,"Phone number must be at least 10 characters"),customerAddress:x.z.string().min(5,"Address must be at least 5 characters"),customerLat:x.z.number().min(-90).max(90),customerLng:x.z.number().min(-180).max(180),categoryId:x.z.number().min(1,"Please select a category"),serviceId:x.z.number().min(1,"Please select a service"),pickupOptionId:x.z.number().min(1,"Please select a pickup option")});function D(){let{t:a,i18n:b}=(0,e.useTranslation)("common"),c=(0,f.useRouter)(),x="ar"===b.language,{register:C,handleSubmit:D,setValue:F,watch:G,formState:{errors:H,isSubmitting:I}}=(0,v.useForm)({resolver:(0,w.zodResolver)(E),defaultValues:{customerLat:24.7136,customerLng:46.6753,customerName:"",customerPhone:"",customerAddress:""}}),J=G("categoryId"),K=G("customerLat"),L=G("customerLng"),{categories:M,isLoading:N}=(0,y.useCategories)(),{pickupOptions:O,isLoading:P}=(0,z.usePickupOptions)();console.log({pickupOptions:O});let{services:Q,isLoading:R}=(0,A.useServices)(J),S=async b=>{try{let e=await B.adminHttp.post("/admin/requests/customer",{customerName:b.customerName,customerPhone:b.customerPhone,customerAddress:b.customerAddress,customerLat:b.customerLat,customerLng:b.customerLng,categoryId:b.categoryId,serviceId:b.serviceId,pickupOptionId:b.pickupOptionId});u.toast.custom((0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 max-w-md",children:(0,d.jsxs)("div",{className:"flex items-start",children:[(0,d.jsx)("div",{className:"shrink-0",children:(0,d.jsx)(t.CheckCircle2,{className:"h-6 w-6 text-green-500"})}),(0,d.jsxs)("div",{className:`${x?"mr-3":"ml-3"}`,children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a("requests.requestCreatedSuccess")}),(0,d.jsx)("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:(0,d.jsxs)("p",{children:[a("requests.requestNumber"),":"," ",(0,d.jsx)("strong",{className:"text-indigo-600 dark:text-indigo-400",children:e.data?.request?.requestNumber||e.data?.requestNumber})]})}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsxs)("button",{onClick:()=>c.push(`/admin/requests/${e.data.request.id}`),className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:[a("requests.viewRequest")," â†’"]})})]})]})}),{duration:8e3}),c.push(`/admin/requests/${e.data.request.id}`)}catch(c){let b=c instanceof Error?c.message:c?.response?.data?.error||a("errors.generic");u.toast.error(b),console.error("Error creating request:",c)}};return N||P?(0,d.jsx)(g.default,{children:(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsx)(n.Loader2,{className:"h-8 w-8 animate-spin text-indigo-600"})})}):(0,d.jsx)(g.default,{children:(0,d.jsx)("div",{className:"min-h-screen bg-linear-to-br from-gray-50 to-indigo-50 dark:from-gray-900 dark:to-black py-12 px-4",dir:x?"rtl":"ltr",children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,d.jsx)(h.BlurFade,{delay:.1,children:(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsxs)("button",{onClick:()=>c.back(),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors mb-4",children:[(0,d.jsx)(j.ArrowLeft,{className:"h-5 w-5"}),(0,d.jsx)("span",{children:a("common.back")})]}),(0,d.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:a("requests.createForCustomer")}),(0,d.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:a("requests.external")})]})}),(0,d.jsx)(h.BlurFade,{delay:.2,children:(0,d.jsx)("div",{className:"p-8 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:(0,d.jsxs)("form",{onSubmit:D(S),className:"space-y-8",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white border-b pb-2 mb-6",children:a("services.title")}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(q.Tag,{className:"inline h-4 w-4 mr-2"}),a("requests.selectCategory")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("select",{id:"categoryId",...C("categoryId",{valueAsNumber:!0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-900 dark:border-gray-700 dark:text-white",children:[(0,d.jsx)("option",{value:"",children:a("requests.selectCategory")}),M?.map(a=>(0,d.jsx)("option",{value:a.id,children:x&&a.nameAr||a.name},a.id))]}),H.categoryId&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),H.categoryId.message]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"serviceId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(r.Package,{className:"inline h-4 w-4 mr-2"}),a("requests.selectService")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("select",{id:"serviceId",...C("serviceId",{valueAsNumber:!0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-900 dark:border-gray-700 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed",disabled:!J||R,children:[(0,d.jsx)("option",{value:"",children:a("requests.selectService")}),R?(0,d.jsx)("option",{disabled:!0,children:a("common.loading")}):Q?.map(a=>(0,d.jsx)("option",{value:a.id,children:x&&a.nameAr||a.name},a.id))]}),H.serviceId&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),H.serviceId.message]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"pickupOptionId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(s.Truck,{className:"inline h-4 w-4 mr-2"}),a("requests.selectPickupOption")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("select",{id:"pickupOptionId",...C("pickupOptionId",{valueAsNumber:!0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-900 dark:border-gray-700 dark:text-white",children:[(0,d.jsx)("option",{value:"",children:a("requests.selectPickupOption")}),O?.map(a=>(0,d.jsx)("option",{value:a.id,children:x&&a.nameAr||a.name},a.id))]}),H.pickupOptionId&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),H.pickupOptionId.message]})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white border-b pb-2 mb-6",children:a("requests.customerInfo")}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"customerName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(l.User,{className:"inline h-4 w-4 mr-2"}),a("requests.customerName")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{id:"customerName",type:"text",...C("customerName"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-900 dark:border-gray-700 dark:text-white",placeholder:a("requests.customerName")}),H.customerName&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),H.customerName.message]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"customerPhone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(m.Phone,{className:"inline h-4 w-4 mr-2"}),a("requests.customerPhone")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{id:"customerPhone",type:"tel",...C("customerPhone"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-900 dark:border-gray-700 dark:text-white",placeholder:"+966 XXX XXX XXX"}),H.customerPhone&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),H.customerPhone.message]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"customerAddress",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,d.jsx)(k.MapPin,{className:"inline h-4 w-4 mr-2"}),a("requests.customerAddress")," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{id:"customerAddress",type:"text",...C("customerAddress"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-900 dark:border-gray-700 dark:text-white",placeholder:a("requests.customerAddress")}),H.customerAddress&&(0,d.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),H.customerAddress.message]})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white border-b pb-2 mb-6",children:a("requests.customerLocation")}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsxs)("button",{type:"button",onClick:()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(b=>{let{latitude:c,longitude:d}=b.coords;F("customerLat",c),F("customerLng",d),u.toast.success(a("branches.locationUpdated"))},b=>{u.toast.error(a("branches.locationError")),console.error("Geolocation error:",b)}):u.toast.error(a("branches.geolocationNotSupported"))},className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,d.jsx)(k.MapPin,{className:"h-4 w-4 mr-2"}),a("branches.getCurrentLocation")]})}),(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:a("requests.clickMapToSetLocation")}),(0,d.jsx)("div",{className:"h-96 w-full rounded-lg overflow-hidden border border-gray-300 dark:border-gray-700",children:(0,d.jsx)(i.default,{latitude:K,longitude:L,onLocationChange:(b,c)=>{F("customerLat",b),F("customerLng",c),u.toast.success(a("branches.locationUpdated"))},draggableMarker:!0,zoom:12})}),(H.customerLat||H.customerLng)&&(0,d.jsxs)("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[(0,d.jsx)(p.AlertCircle,{className:"h-3 w-3"}),a("requests.locationRequired")]})]}),(0,d.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("button",{type:"button",onClick:()=>c.back(),className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:a("common.cancel")}),(0,d.jsx)("button",{type:"submit",disabled:I,className:"flex items-center gap-2 px-8 py-3 bg-linear-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:I?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.Loader2,{className:"h-5 w-5 animate-spin"}),a("requests.creatingRequest")]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Send,{className:"h-5 w-5"}),a("requests.createNew")]})})]})]})})})]})})})}a.s(["default",()=>D]),c()}catch(a){c(a)}},!1),38597,a=>a.a(async(b,c)=>{try{var d=a.i(65898),e=a.i(24244),f=a.i(67175),g=a.i(14924),h=a.i(85634),i=a.i(43753),j=a.i(91213),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/requests/new",pathname:"/admin/requests/new",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/requests/new",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=projects_ticketing-platform_28859d4e._.js.map
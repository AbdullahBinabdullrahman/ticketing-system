module.exports=[81067,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(47750),g=a.i(14229),h=a.i(79336),i=a.i(96522),j=a.i(98998),k=a.i(33292),l=a.i(73632),m=a.i(95956),n=a.i(1161),o=a.i(61917),p=a.i(68911),q=a.i(24917),r=a.i(98647),s=a.i(81958),t=a.i(88410),u=a.i(54006),v=a.i(88481),w=a.i(15742),x=a.i(82031),y=a.i(13987),z=a.i(83242),A=a.i(75441),B=a.i(75627),C=a.i(34791),D=b([f,h,i,j,k,l,B,C]);function E(){let{t:a,i18n:b}=(0,f.useTranslation)("common"),c=(0,g.useRouter)(),{id:D}=c.query,E=D?parseInt(D):null,F="ar"===b.language,{partner:G,isLoading:H}=(0,i.usePartner)(E),{users:I,isLoading:J,createUser:K}=(0,j.useAdminPartnerUsers)(E),[L,M]=(0,e.useState)(!1),[N,O]=(0,e.useState)(!1),[P,Q]=(0,e.useState)(!1),[R,S]=(0,e.useState)(null),[T,U]=(0,e.useState)({name:"",email:"",phone:"",language:b.language,sendWelcomeEmail:!0}),[V,W]=(0,e.useState)({}),X=(a,b)=>{U(c=>({...c,[a]:b})),V[a]&&W(b=>{let c={...b};return delete c[a],c})},Y=async()=>{let b;if(b={},T.name.trim()?T.name.trim().length<2&&(b.name=a("validation.nameTooShort")):b.name=a("validation.nameRequired"),T.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.email)||(b.email=a("validation.emailInvalid")):b.email=a("validation.emailRequired"),T.phone&&T.phone.length<10&&(b.phone=a("validation.phoneTooShort")),W(b),0!==Object.keys(b).length)return void B.toast.error(a("validation.pleaseFixErrors"));O(!0);try{let b=await K(T);b.temporaryPassword?(S(b.temporaryPassword),Q(!0),B.toast.success((0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-semibold",children:a("users.userCreated")}),(0,d.jsx)("p",{className:"text-xs mt-1",children:a("users.passwordDisplayed")})]}),{duration:5e3})):(B.toast.success(a("users.userCreated")),M(!1),Z())}catch(b){B.toast.error(b.response?.data?.error?.message||a("errors.generic"))}finally{O(!1)}},Z=()=>{U({name:"",email:"",phone:"",language:b.language,sendWelcomeEmail:!0}),W({}),S(null),Q(!1)},$=()=>{M(!1),Z()},_=c=>c?new Date(c).toLocaleDateString(b.language,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):a("common.never");return H||J?(0,d.jsx)(h.default,{children:(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",dir:F?"rtl":"ltr",children:(0,d.jsxs)(C.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:[(0,d.jsx)(p.Loader2,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-indigo-600"}),(0,d.jsx)("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:a("common.loading")})]})})}):G?(0,d.jsxs)(h.default,{children:[(0,d.jsx)("div",{className:"min-h-screen py-8 px-4 sm:px-6 lg:px-8 bg-gray-50 dark:bg-gray-900",dir:F?"rtl":"ltr",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,d.jsx)(k.BlurFade,{delay:.1,children:(0,d.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("button",{onClick:()=>c.back(),className:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:(0,d.jsx)(n.ArrowLeft,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a("users.title")}),(0,d.jsx)("p",{className:"text-sm mt-1 text-gray-600 dark:text-gray-400",children:G.name})]})]}),(0,d.jsxs)(C.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>M(!0),className:"flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200  from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[(0,d.jsx)(o.Plus,{className:"h-5 w-5"}),a("users.addUser")]})]})}),(0,d.jsx)(k.BlurFade,{delay:.2,children:0===I.length?(0,d.jsxs)(l.MagicCard,{className:"p-12 bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 text-center",children:[(0,d.jsx)(m.Users,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:a("users.noUsers")}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:a("users.noUsersDescription")}),(0,d.jsxs)("button",{onClick:()=>M(!0),className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200  from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[(0,d.jsx)(o.Plus,{className:"h-5 w-5"}),a("users.addFirstUser")]})]}):(0,d.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:I.map(b=>(0,d.jsx)(k.BlurFade,{delay:.3,children:(0,d.jsxs)(l.MagicCard,{className:"p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 transition-shadow",children:[(0,d.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:`p-3 rounded-lg ${b.isActive?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:(0,d.jsx)(t.User,{className:`h-6 w-6 ${b.isActive?"text-green-600":"text-gray-400"}`})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:b.name}),(0,d.jsx)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${b.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:b.isActive?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.CheckCircle2,{className:"h-3 w-3"}),a("common.active")]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v.XCircle,{className:"h-3 w-3"}),a("common.inactive")]})})]})]})}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,d.jsx)(r.Mail,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"truncate",children:b.email})]}),b.phone&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,d.jsx)(s.Phone,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:b.phone})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,d.jsx)(x.Globe,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:"ar"===b.languagePreference?a("languages.arabic"):a("languages.english")})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,d.jsx)(w.Clock,{className:"h-4 w-4"}),(0,d.jsxs)("span",{children:[a("users.lastLogin"),":"," ",_(b.lastLoginAt)]})]}),(0,d.jsx)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:b.emailVerifiedAt?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.CheckCircle2,{className:"h-4 w-4 text-green-500"}),(0,d.jsx)("span",{children:a("users.emailVerified")})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(q.AlertCircle,{className:"h-4 w-4 text-amber-500"}),(0,d.jsx)("span",{children:a("users.emailNotVerified")})]})})]}),(0,d.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,d.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a("common.created"),": ",_(b.createdAt)]})})]})},b.id))})})]})}),(0,d.jsx)(C.AnimatePresence,{children:L&&(0,d.jsx)(C.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>!N&&!R&&$(),children:(0,d.jsxs)(C.motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:a=>a.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:R?a("users.userCreatedTitle"):a("users.addUser")})}),R?(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:(0,d.jsxs)("div",{className:"flex items-start gap-2",children:[(0,d.jsx)(u.CheckCircle2,{className:"h-5 w-5 text-green-600 mt-0.5"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-green-900 dark:text-green-100 mb-1",children:a("users.userCreatedSuccessfully")}),(0,d.jsx)("p",{className:"text-xs text-green-700 dark:text-green-300",children:a("users.temporaryPasswordGenerated")})]})]})}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("users.email")}),(0,d.jsx)("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,d.jsx)("p",{className:"text-sm font-mono text-gray-900 dark:text-white",children:T.email})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("users.temporaryPassword")}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:(0,d.jsx)("p",{className:`text-sm font-mono text-amber-900 dark:text-amber-100 break-all ${!P?"blur-sm":""}`,children:R})}),(0,d.jsxs)("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:[(0,d.jsx)("button",{onClick:()=>Q(!P),className:"p-1.5 rounded-lg hover:bg-amber-100 dark:hover:bg-amber-900/40 transition-colors",children:P?(0,d.jsx)(A.EyeOff,{className:"h-4 w-4 text-amber-700"}):(0,d.jsx)(z.Eye,{className:"h-4 w-4 text-amber-700"})}),(0,d.jsx)("button",{onClick:()=>{R&&(navigator.clipboard.writeText(R),B.toast.success(a("users.passwordCopied")))},className:"p-1.5 rounded-lg hover:bg-amber-100 dark:hover:bg-amber-900/40 transition-colors",children:(0,d.jsx)(y.Copy,{className:"h-4 w-4 text-amber-700"})})]})]}),(0,d.jsx)("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2",children:a("users.passwordWarning")})]})]}),T.sendWelcomeEmail&&(0,d.jsx)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:(0,d.jsxs)("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[(0,d.jsx)(r.Mail,{className:"h-4 w-4 inline mr-1"}),a("users.welcomeEmailSent")]})}),(0,d.jsx)("button",{onClick:$,className:"w-full px-6 py-3 rounded-xl font-semibold transition-all duration-200  from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:a("common.close")})]}):(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:[a("users.name")," *"]}),(0,d.jsx)("input",{type:"text",value:T.name,onChange:a=>X("name",a.target.value),className:`w-full px-4 py-3 rounded-lg border-2 transition-all ${V.name?"border-red-500":"border-gray-200 dark:border-gray-700 focus:border-indigo-500"} bg-white dark:bg-gray-900 text-gray-900 dark:text-white`,placeholder:a("users.namePlaceholder")}),V.name&&(0,d.jsx)("p",{className:"text-xs text-red-500 mt-1",children:V.name})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:[a("users.email")," *"]}),(0,d.jsx)("input",{type:"email",value:T.email,onChange:a=>X("email",a.target.value),className:`w-full px-4 py-3 rounded-lg border-2 transition-all ${V.email?"border-red-500":"border-gray-200 dark:border-gray-700 focus:border-indigo-500"} bg-white dark:bg-gray-900 text-gray-900 dark:text-white`,placeholder:a("users.emailPlaceholder")}),V.email&&(0,d.jsx)("p",{className:"text-xs text-red-500 mt-1",children:V.email})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:a("users.phone")}),(0,d.jsx)("input",{type:"tel",value:T.phone,onChange:a=>X("phone",a.target.value),className:`w-full px-4 py-3 rounded-lg border-2 transition-all ${V.phone?"border-red-500":"border-gray-200 dark:border-gray-700 focus:border-indigo-500"} bg-white dark:bg-gray-900 text-gray-900 dark:text-white`,placeholder:a("users.phonePlaceholder")}),V.phone&&(0,d.jsx)("p",{className:"text-xs text-red-500 mt-1",children:V.phone})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:a("users.language")}),(0,d.jsxs)("select",{value:T.language,onChange:a=>X("language",a.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 dark:border-gray-700 focus:border-indigo-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"en",children:a("languages.english")}),(0,d.jsx)("option",{value:"ar",children:a("languages.arabic")})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,d.jsx)("input",{type:"checkbox",id:"sendWelcomeEmail",checked:T.sendWelcomeEmail,onChange:a=>X("sendWelcomeEmail",a.target.checked),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),(0,d.jsx)("label",{htmlFor:"sendWelcomeEmail",className:"text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:a("users.sendWelcomeEmail")})]}),(0,d.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("button",{onClick:$,disabled:N,className:"px-6 py-3 rounded-xl font-semibold transition-colors bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-50",children:a("common.cancel")}),(0,d.jsx)(C.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:Y,disabled:N,className:"px-6 py-3 rounded-xl font-semibold transition-all duration-200 flex items-center gap-2  from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:N?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p.Loader2,{className:"h-5 w-5 animate-spin"}),a("common.creating")]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Plus,{className:"h-5 w-5"}),a("users.createUser")]})})]})]})]})})})]}):(0,d.jsx)(h.default,{children:(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",dir:F?"rtl":"ltr",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(q.AlertCircle,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),(0,d.jsx)("h2",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:a("partners.notFound")}),(0,d.jsx)("button",{onClick:()=>c.push("/admin/partners"),className:"px-4 py-2 rounded-lg transition-colors  from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:a("partners.backToList")})]})})})}[f,h,i,j,k,l,B,C]=D.then?(await D)():D,a.s(["default",()=>E]),c()}catch(a){c(a)}},!1),61463,a=>a.a(async(b,c)=>{try{var d=a.i(65898),e=a.i(24244),f=a.i(67175),g=a.i(14924),h=a.i(85634),i=a.i(81067),j=a.i(91213),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/partners/[id]/users",pathname:"/admin/partners/[id]/users",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/partners/[id]/users",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=projects_ticketing-platform_e0fbf7e3._.js.map
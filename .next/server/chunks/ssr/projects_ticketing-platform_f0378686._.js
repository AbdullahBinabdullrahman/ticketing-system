module.exports=[6045,a=>{"use strict";var b=a.i(83163),c=a.i(16049),d=a.i(72488),e=a.i(83624),f=a.i(74058),g=a.i(88553);function h(a,b){let c=(0,g.toDate)(a)-(0,g.toDate)(b);return c<0?-1:c>0?1:c}var i=a.i(88400),j=a.i(43602),k=a.i(10940);function l(a,l){return function(a,b,l){let m,n,o=(0,d.getDefaultOptions)(),p=l?.locale??o.locale??c.defaultLocale,q=h(a,b);if(isNaN(q))throw RangeError("Invalid time value");let r=Object.assign({},l,{addSuffix:l?.addSuffix,comparison:q}),[s,t]=(0,f.normalizeDates)(l?.in,...q>0?[b,a]:[a,b]),u=(n=(0,k.differenceInMilliseconds)(t,s)/1e3,(0,j.getRoundingMethod)(void 0)(n)),v=Math.round((u-((0,e.getTimezoneOffsetInMilliseconds)(t)-(0,e.getTimezoneOffsetInMilliseconds)(s))/1e3)/60);if(v<2)if(l?.includeSeconds)if(u<5)return p.formatDistance("lessThanXSeconds",5,r);else if(u<10)return p.formatDistance("lessThanXSeconds",10,r);else if(u<20)return p.formatDistance("lessThanXSeconds",20,r);else if(u<40)return p.formatDistance("halfAMinute",0,r);else if(u<60)return p.formatDistance("lessThanXMinutes",1,r);else return p.formatDistance("xMinutes",1,r);else if(0===v)return p.formatDistance("lessThanXMinutes",1,r);else return p.formatDistance("xMinutes",v,r);if(v<45)return p.formatDistance("xMinutes",v,r);if(v<90)return p.formatDistance("aboutXHours",1,r);if(v<i.minutesInDay){let a=Math.round(v/60);return p.formatDistance("aboutXHours",a,r)}if(v<2520)return p.formatDistance("xDays",1,r);else if(v<i.minutesInMonth){let a=Math.round(v/i.minutesInDay);return p.formatDistance("xDays",a,r)}else if(v<2*i.minutesInMonth)return m=Math.round(v/i.minutesInMonth),p.formatDistance("aboutXMonths",m,r);if((m=function(a,b,c){var d,e;let i,j,k,l,[m,n,o]=(0,f.normalizeDates)(void 0,a,a,b),p=h(n,o),q=Math.abs(function(a,b,c){let[d,e]=(0,f.normalizeDates)(void 0,a,b);return 12*(d.getFullYear()-e.getFullYear())+(d.getMonth()-e.getMonth())}(n,o));if(q<1)return 0;1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-p*q);let r=h(n,o)===-p;+(i=(0,g.toDate)(m,void 0),d=void 0,(j=(0,g.toDate)(i,d?.in)).setHours(23,59,59,999),j)==+(e=void 0,l=(k=(0,g.toDate)(i,e?.in)).getMonth(),k.setFullYear(k.getFullYear(),l+1,0),k.setHours(23,59,59,999),k)&&1===q&&1===h(m,o)&&(r=!1);let s=p*(q-r);return 0===s?0:s}(t,s))<12){let a=Math.round(v/i.minutesInMonth);return p.formatDistance("xMonths",a,r)}{let a=m%12,b=Math.trunc(m/12);return a<3?p.formatDistance("aboutXYears",b,r):a<9?p.formatDistance("overXYears",b,r):p.formatDistance("almostXYears",b+1,r)}}(a,(0,b.constructFrom)(a,Date.now()),l)}a.s(["formatDistanceToNow",()=>l],6045)},41554,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(14229),g=a.i(47750),h=a.i(79336),i=a.i(77031),j=a.i(15022),k=a.i(3750),l=a.i(15742),m=a.i(88410),n=a.i(81958),o=a.i(24413),p=a.i(16875),q=a.i(88948),r=a.i(94503),s=a.i(33292),t=a.i(62806),u=a.i(61462),v=a.i(4866),w=a.i(6045),x=b([g,h,i,s,t,u,v]);function y(){let{t:a,i18n:b}=(0,g.useTranslation)("common"),c=(0,f.useRouter)(),[x,y]=(0,e.useState)(null),[z,A]=(0,e.useState)(!1),[B,C]=(0,e.useState)(!1),[D,E]=(0,e.useState)({page:1,limit:20,status:"submitted",sortBy:"createdAt",sortOrder:"desc"}),{requests:F,pagination:G,isLoading:H,mutate:I}=(0,i.useRequests)(D),J=F.filter(a=>"submitted"===a.status||"unassigned"===a.status),K=a=>{let{name:b,value:c}=a.target;E(a=>({...a,[b]:c,page:1}))};return(0,d.jsxs)(h.default,{children:[(0,d.jsxs)("div",{className:"space-y-6",dir:"ar"===b.language?"rtl":"ltr",children:[(0,d.jsx)(s.BlurFade,{delay:.1,children:(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:a("assignmentQueue")}),(0,d.jsx)("p",{className:"text-gray-600 mt-1",children:a("assignmentQueueDescription")})]}),(0,d.jsxs)("button",{onClick:()=>C(!B),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,d.jsx)(p.Filter,{className:"w-4 h-4"}),a("common.filters")]})]})}),(0,d.jsx)(s.BlurFade,{delay:.15,children:(0,d.jsx)("div",{className:" from-orange-500 to-orange-600 rounded-lg shadow-md p-6 text-white",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-orange-100 text-sm font-medium",children:a("unassignedRequests")}),(0,d.jsx)("p",{className:"text-4xl font-bold mt-1",children:J.length}),(0,d.jsx)("p",{className:"text-orange-100 text-sm mt-1",children:a("waitingForAssignment")})]}),(0,d.jsx)("div",{className:"hidden sm:flex items-center gap-4",children:(0,d.jsx)(r.Zap,{className:"w-16 h-16 text-orange-200 opacity-50"})})]})})}),B&&(0,d.jsx)(s.BlurFade,{delay:.2,children:(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-900",children:a("common.filters")}),(0,d.jsxs)("button",{onClick:()=>{E({page:1,limit:20,status:"submitted",sortBy:"createdAt",sortOrder:"desc"})},className:"text-sm text-orange-600 hover:text-orange-700 flex items-center gap-1",children:[(0,d.jsx)(q.X,{className:"w-4 h-4"}),a("common.clear")]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("categories.category")}),(0,d.jsx)("input",{type:"text",name:"categoryId",placeholder:a("common.all"),value:D.categoryId||"",onChange:K,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("requests.pickupOption")}),(0,d.jsx)("input",{type:"text",name:"pickupOptionId",placeholder:a("common.all"),value:D.pickupOptionId||"",onChange:K,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("common.search")}),(0,d.jsx)("input",{type:"text",name:"search",placeholder:a("searchByCustomerOrPhone"),value:D.customerName||"",onChange:K,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]})]})}),H&&(0,d.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}),!H&&0===J.length&&(0,d.jsx)(s.BlurFade,{delay:.3,children:(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,d.jsx)(j.FileText,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:a("noUnassignedRequests")}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:a("noUnassignedRequestsDescription")}),(0,d.jsx)(t.ShimmerButton,{onClick:()=>c.push("/admin/requests"),children:a("viewAllRequests")})]})}),!H&&J.length>0&&(0,d.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:J.map((b,e)=>(0,d.jsx)(s.BlurFade,{delay:.2+.05*e,children:(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,d.jsxs)("span",{className:"text-sm font-mono text-gray-500",children:["#",b.requestNumber]}),(0,d.jsx)(u.default,{status:b.status})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:(0,w.formatDistanceToNow)(new Date(b.createdAt),{addSuffix:!0})})]}),b.slaDeadline&&(0,d.jsxs)("div",{className:"flex items-center gap-1 text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded",children:[(0,d.jsx)(l.Clock,{className:"w-3 h-3"}),a("slaActive")]})]}),(0,d.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,d.jsx)(m.User,{className:"w-4 h-4 text-gray-400"}),(0,d.jsx)("span",{className:"font-medium",children:b.customerName})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[(0,d.jsx)(n.Phone,{className:"w-4 h-4 text-gray-400"}),(0,d.jsx)("span",{className:"font-mono",children:b.customerPhone})]}),(0,d.jsxs)("div",{className:"flex items-start gap-2 text-gray-600 text-sm",children:[(0,d.jsx)(k.MapPin,{className:"w-4 h-4 text-gray-400 mt-0.5"}),(0,d.jsx)("span",{className:"line-clamp-2",children:b.customerAddress})]})]}),(0,d.jsxs)("div",{className:"bg-gray-50 rounded-md p-3 mb-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,d.jsx)(o.Package,{className:"w-4 h-4 text-orange-500"}),(0,d.jsx)("span",{className:"font-medium text-gray-900",children:b.categoryName}),b.serviceName&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"text-gray-400",children:"â†’"}),(0,d.jsx)("span",{className:"text-gray-700",children:b.serviceName})]})]}),(0,d.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:b.pickupOptionName})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)("button",{onClick:()=>{var a;return a=b.id,void(y(a),A(!0))},className:"flex-1 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors font-medium flex items-center justify-center gap-2",children:[(0,d.jsx)(r.Zap,{className:"w-4 h-4"}),a("quickAssign")]}),(0,d.jsx)("button",{onClick:()=>{var a;return a=b.requestNumber,void c.push(`/admin/requests/${a}`)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:a("common.view")})]})]})},b.id))}),!H&&J.length>0&&G&&G.totalPages>1&&(0,d.jsx)(s.BlurFade,{delay:.5,children:(0,d.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,d.jsx)("button",{onClick:()=>E(a=>({...a,page:a.page-1})),disabled:1===G.page,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:a("common.previous")}),(0,d.jsxs)("span",{className:"text-gray-700",children:[a("common.page")," ",G.page," ",a("common.of")," ",G.totalPages]}),(0,d.jsx)("button",{onClick:()=>E(a=>({...a,page:a.page+1})),disabled:G.page===G.totalPages,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:a("common.next")})]})})]}),x&&(0,d.jsx)(v.default,{requestId:x,isOpen:z,onClose:()=>{A(!1),y(null)},onAssignSuccess:()=>{A(!1),y(null),I()}})]})}async function z(){return{props:{}}}[g,h,i,s,t,u,v]=x.then?(await x)():x,a.s(["default",()=>y,"getServerSideProps",()=>z]),c()}catch(a){c(a)}},!1),19752,a=>a.a(async(b,c)=>{try{var d=a.i(65898),e=a.i(24244),f=a.i(67175),g=a.i(14924),h=a.i(85634),i=a.i(41554),j=a.i(91213),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/requests/queue",pathname:"/admin/requests/queue",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/requests/queue",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=projects_ticketing-platform_f0378686._.js.map